define("MsPortalImpl/Services/GlobalSearchProviders/AadSearchProvider",["require","exports","Fx/DependencyInjection","MsPortalImpl/Services/GlobalSearchProviders/SearchProviderUtils","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Services/Services.Util"],(function(e,r,t,s,a,o){"use strict";r.configData=r.AadSearchProvider=void 0;var i=MsPortalFx.Base.Diagnostics.Telemetry;const l=MsPortalFx.Base.Diagnostics.createLog(e),c=r.configData={aadDomainPills:window.fx.environment.globalSearch.pills};let n=r.AadSearchProvider=class{constructor(e){this._aadPills={},this._resultCount=8,this._ltm=new FxImpl.TriggerableLifetimeManager;const r=c.aadDomainPills?.map((e=>e.pillType))||[];this.supportedPills=["AzureActiveDirectory",...r]}dispose(){this._ltm.dispose()}performSearch(e){return async function(e){const r=i.start({source:"Search",action:"EntraSearch"});try{const t=await MsPortalFx.Services.Rpc.invokeCallback("Microsoft_AAD_IAM","getSearchResults",e);return i.completeTrace(r),t}catch(e){throw i.cancelTrace(r,{error:e}),e}}({searchCriteria:e,resultsCount:30}).then((e=>this.getAadResults(e,this._aadPills,this._resultSections,this._resultCount,this._subscribeAndUpdateSeeMoreText,this._ltm)),(r=>{l.error("Failed to get AAD results for criteria {0} with error: ".format((0,o.redactSensitiveData)(e)),null,r),this.getAadResults(null,this._aadPills,this._resultSections,this._resultCount,this._subscribeAndUpdateSeeMoreText,this._ltm,FxImpl.Azure.buildSimplifiedError(r.jqXHR||r).message)}))}createProviderPills(e,r,t){return this._subscribeAndUpdateSeeMoreText=t.subscribeAndUpdateSeeMoreText,(c.aadDomainPills?.map((e=>a.Search[e.pillTitleResxKey]||e.pillTitleResxKey))||[a.Search.aadCategory]).forEach((t=>{this._aadPills[t]=(0,s.createPill)(t,e,r)})),t?.searchResultsCount&&(this._resultCount=t.searchResultsCount),Object.values(this._aadPills)}setResultSections(e){this._resultSections=e}getAadResults(e,r,t,s,o,i,l){const n=c.aadDomainPills?.length>0,u=e=>e?.map((e=>{const r="User"===e.resultType||"Group"===e.resultType?e.subTitle:"";return{displayName:e.displayName,detailsType:0,deepLink:e.deepLink,icon:"number"==typeof e.icon?{type:e.icon}:e.icon,id:e.displayName,origDisplayName:e.displayName,resultType:"AzureActiveDirectory",typeName:e.resultType,secondaryName:r}})),d=(e,r,t,a)=>{e.error(null),e.moreLinkType(6),e.moreLinkDetails(a.seeAllLink),e.showSeeMore(a.totalResultsCount>s),e.results(r),e.additionalResults(t),e.totalResultsCount(a.totalResultsCount),o(i,e.moreResultsLinkText)};t.forEach((t=>{if(t.isLoading(!1),l)t.error(a.Search.error.format(t.displayName,l)),t.showSeeMore(!1);else if(n){const a=r[t.displayName],o=e.resultGroups.find((e=>e.sectionTitle.toLocaleLowerCase()===t.displayName.toLocaleLowerCase())),i=o?.results,l=u(i),c=l.slice(0,s),n=l.slice(s);d(t,c,n,{seeAllLink:o.seeAllLink,totalResultsCount:o.totalResultsCount}),a.value(` (${t.totalResultsCount()>=100?"99+":t.totalResultsCount()})`)}else{let o=[];const i=e.resultGroups?.filter((e=>e.results?.length>0)),l=e.resultGroups?.reduce(((e,r)=>e+r.results?.length),0);if(l>30){if(o=e.resultGroups?.reduce(((e,r)=>{const t=r.results.length/i.length,s=u(r.results?.slice(0,t));return e.concat(s)}),[]),o.length<30&&l>30)for(;o.length<30;){const r=e.resultGroups?.reduce(((e,r)=>{const t=r.results.length/i.length,s=u(r.results?.slice(t,2*t));return e.concat(s)}),[]);o=o.concat(r)}const r=o.slice(0,s),a=30-s,c=o.slice(s,s+a);d(t,r,c,{seeAllLink:e.seeAllLink,totalResultsCount:e.totalResultsCount})}else{o=e.resultGroups?.reduce(((e,r)=>{const t=u(r.results)||[];return e.concat(t)}),[]);const r=o.slice(0,s),a=o.slice(s);d(t,r,a,{seeAllLink:e.seeAllLink,totalResultsCount:e.totalResultsCount})}r[a.Search.aadCategory].value(` (${t.totalResultsCount()>=100?"99+":t.totalResultsCount()})`)}}))}};r.AadSearchProvider=n=__decorate([__metadata("fx:diagnostics",[e,"AadSearchProvider"]),t.Class(),__metadata("design:paramtypes",[t.Container])],n)})),
define("MsPortalImpl/Services/GlobalSearchProviders/MarketplaceAndDocumentationProvider",["require","exports","Fx/DependencyInjection","MsPortalImpl/Base/Languages","MsPortalImpl/Services/GlobalSearchProviders/SearchProviderUtils","MsPortalImpl/Services/Services.Util","MsPortalImpl/Resources/ImplScriptResources","Fx/Ajax","Fx/Experimentation"],(function(e,r,t,s,a,o,i,l,c){"use strict";r.customBingSearchEnabled=r.MarketplaceAndDocumentationProvider=r.DEV=void 0;var n=MsPortalFx.Base,u=MsPortalFx.Base.Diagnostics,d=u.Telemetry,p=n.Images.Polychromatic,h=n.Resources;const m=r.customBingSearchEnabled=MsPortalFx.isFeatureEnabled("customBingSearch"),S=u.createLog(e),v={showMarketplace:!window.fx.environment.globalSearch.hideMarketplace};function y(e,r){let t=JSON.stringify(e||"");t.includes("searchQuery=")&&(t=t.replace(/searchQuery=[^&]+/g,"searchQuery=***")),S.error({name:`${r}SearchError`,message:t})}let P=r.MarketplaceAndDocumentationProvider=class{constructor(e){this._experimentation=e,this._providerPills={},this._resultCount=8,this._enableDocV1Api=this._experimentation.shellAssignments.getBooleanValue("searchUseDocsV1Api"),this._ltm=new FxImpl.TriggerableLifetimeManager,this.supportedPills=["Documentation"],v.showMarketplace&&this.supportedPills.push("Marketplace")}dispose(){this._ltm.dispose()}performSearch(e){const r=async function(e,r){const t=d.start({source:"Search",action:"SearchProviders"}),a=s.getCurrentLocaleContext().selectedDisplayLanguage,o=[],c={"feature.customBingSearch":!1,"feature.usemarketplacesuggestionsapi":!0};m&&(c["feature.customBingSearch"]=!0);const n=encodeURIComponent(e),u=d.start({source:"Search",action:"SearchDocs"});let p;if(r){const e=`https://learn.microsoft.com/api/v1/search?locale=${a}&maxpagesize=30&api-version=2023-11-01-preview`;p=(0,l.ajax)({uri:e,type:"POST",contentType:"application/json",setAuthorizationHeader:{resourceName:"mslearn"},data:JSON.stringify({search:n,filter:"products/any(t: t eq '/devrel/68ec7f3a-2bc6-459f-b959-19beb729907d') and (category ne 'QnA')"})}).then((e=>(d.completeTrace(u,{results:e?.count}),{displayName:i.Search.documentation,results:e?.value?.map((e=>({displayName:e.title,id:e.title,resultType:"Documentation",detailsType:3,details:e.url,deepLink:"",origDisplayName:e.title}))),totalResultsCount:e?.count,providerResultType:2,moreLinkType:4,moreLinkDetails:`https://learn.microsoft.com/${a}/search/?terms=${n}&products=${encodeURIComponent("/devrel/68ec7f3a-2bc6-459f-b959-19beb729907d")}&wt.mc_id=searchAPI_azureportal_inproduct_rmskilling&sessionId=${MsPortalFx.sessionId}`}))).catch((e=>(d.cancelTrace(u),y(e,"DocsProvider"),{displayName:i.Search.documentation,results:null,error:e,totalResultsCount:0,providerResultType:2,moreLinkType:4})))}else{const e=`https://learn.microsoft.com/api/search?terms=${n}&locale=${a}&facet=category&facet=products&%24filter=(((products%2Fany(t%3A%20t%20eq%20%27${encodeURIComponent("/devrel/68ec7f3a-2bc6-459f-b959-19beb729907d")}%27))))%20and%20(category%20ne%20%27QnA%27)&%24top=30&expandScope=true&partnerId=AzurePortal`;p=(0,l.ajax)({uri:e,type:"GET",contentType:"application/json"}).then((e=>(d.completeTrace(u,{results:e?.count}),{displayName:i.Search.documentation,results:e?.results?.map((e=>({displayName:e.title,id:e.title,resultType:"Documentation",detailsType:3,details:`${e.url}?wt.mc_id=searchAPI_azureportal_inproduct_rmskilling&sessionId=${MsPortalFx.sessionId}`}))),totalResultsCount:e?.count,providerResultType:2,moreLinkType:4,moreLinkDetails:`https://learn.microsoft.com/${a}/search/?terms=${n}&products=${encodeURIComponent("/devrel/68ec7f3a-2bc6-459f-b959-19beb729907d")}&wt.mc_id=searchAPI_azureportal_inproduct_rmskilling&sessionId=${MsPortalFx.sessionId}`}))).catch((e=>(d.cancelTrace(u),y(e,"DocsProvider"),{displayName:i.Search.documentation,results:null,error:e,totalResultsCount:0,providerResultType:2,moreLinkType:4})))}o.push(p);const S={"x-ms-app":"IbizaGlobalSearch","X-Api-Key":fx.internalEnv.marketplaceConfiguration},v=`https://catalogapi.azure.com/suggestions/products?searchQuery=${n}&language=${a}&gallery=Azure&suggestionTypes=Entity&top=31&api-version=2023-01-01-preview`,P=d.start({source:"Search",action:"SearchMarketplace"}),g=(0,l.ajax)({uri:v,type:"GET",contentType:"application/json",headers:S}).then((e=>(d.completeTrace(P,{results:e?.totalCount}),{displayName:i.Search.marketplace,results:e?.value?.map((e=>({displayName:e.displayText,id:e.id,resultType:"Marketplace",details:`#create/${e.id}`}))),totalResultsCount:e?.totalCount,providerResultType:1,moreLinkType:3}))).catch((e=>(d.cancelTrace(P),y(e,"MarketplaceProvider"),{displayName:i.Search.marketplace,results:null,error:e,totalResultsCount:0,providerResultType:1,moreLinkType:3})));o.push(g);const f=(0,l.ajax)({uri:h.getAppRelativeUri("/api/portalsearch"),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({criteria:e}),headers:{"x-ms-feature-flags":JSON.stringify(c)}}).then((r=>(d.completeTrace(t,{providers:r.length,isMarketplaceCriteriaTruncated:e?.length>100}),r))).catch((e=>{throw d.cancelTrace(t,{error:e}),e}));o.push(f);const _=await Promise.all(o)||[];return[].concat(..._)}(e,this._enableDocV1Api);return function(e,r,t,s,l,c,n){const u=s.find((e=>e.matchingPillName.toLowerCase()==="Marketplace".toLowerCase())),d=s.find((e=>e.matchingPillName.toLowerCase()==="Documentation".toLowerCase()));return e.then((e=>{let r,s;if(e?.forEach((e=>{e&&(2===e.providerResultType?s=e:1===e.providerResultType&&(r=e))})),v.showMarketplace){const e=t.Marketplace;if(r)if(r.error)(0,a.resetCategoryState)(u),u.error(i.Search.error.format(u.displayName,r.error?.message||i.Search.unknownError));else{const t=(ko.utils.unwrapObservable(r.results)||[]).map((e=>(e.icon=p.Store(),MsPortalFx.extend(e,{deepLink:e.details,isExternal:3===e.detailsType})))),s=t.slice(0,l),a=t.slice(l);u.isLoading(!1),u.moreLinkType(ko.utils.unwrapObservable(r.moreLinkType)),u.results(s),u.additionalResults(a),u.totalResultsCount(ko.utils.unwrapObservable(r.totalResultsCount)),u.showSeeMore(u.totalResultsCount()>l),u.moreLinkDetails(ko.utils.unwrapObservable(r.moreLinkDetails)),u.error(null),c(n,u.moreResultsLinkText),e.value(` (${u.totalResultsCount()>=100?"99+":u.totalResultsCount()})`)}else(0,a.resetCategoryState)(u),u.error(i.Search.error.format(u.displayName,i.Search.unknownError))}if(s)if(s.error)(0,a.resetCategoryState)(d),d.error(i.Search.error.format(d.displayName,s.error?.message||i.Search.unknownError));else{const e=t.Documentation,r=(ko.utils.unwrapObservable(s.results)||[]).map((e=>MsPortalFx.extend(e,{deepLink:e.details,isExternal:3===e.detailsType}))),a=r.slice(0,l),o=r.slice(l);d.isLoading(!1),d.moreLinkType(ko.utils.unwrapObservable(s.moreLinkType)),d.results(a),d.additionalResults(o),d.totalResultsCount(ko.utils.unwrapObservable(s.totalResultsCount)),d.showSeeMore(d.totalResultsCount()>l),d.moreLinkDetails(ko.utils.unwrapObservable(s.moreLinkDetails)),d.error(null),c(n,d.moreResultsLinkText),e.value(` (${d.totalResultsCount()>=100?"99+":d.totalResultsCount()})`)}else(0,a.resetCategoryState)(d),d.error(i.Search.error.format(d.displayName,i.Search.unknownError))}),(e=>{S.error("Failed to get search providers results for criteria: {0} with error :".format((0,o.redactSensitiveData)(r)),null,e);const t=FxImpl.Azure.buildSimplifiedError(e.jqXHR||e).message;u.isLoading(!1),u.error(i.Search.error.format(u.displayName,t)),u.showSeeMore(!1),d.isLoading(!1),d.error(i.Search.error.format(d.displayName,t)),d.showSeeMore(!1)}))}(r,e,this._providerPills,this._resultSections,this._resultCount,this._subscribeAndUpdateSeeMoreText,this._ltm)}createProviderPills(e,r,t){this._subscribeAndUpdateSeeMoreText=t.subscribeAndUpdateSeeMoreText;const s=v.showMarketplace&&(0,a.createPill)(i.Search.marketplace,e,r),o=(0,a.createPill)(i.Search.documentation,e,r);return t?.searchResultsCount&&(this._resultCount=t.searchResultsCount),s&&(this._providerPills.Marketplace=s),this._providerPills.Documentation=o,Object.values(this._providerPills)}setResultSections(e){this._resultSections=e}};r.MarketplaceAndDocumentationProvider=P=__decorate([__metadata("fx:diagnostics",[e,"MarketplaceAndDocumentationProvider"]),t.Class(),__metadata("design:paramtypes",[c.Experimentation])],P)})),
define("MsPortalImpl/Services/GlobalSearchProviders/ServiceSearchProvider",["require","exports","MsPortalImpl/UI/Hubs/UI.FavoritesManagerDeferred","Fx/DependencyInjection","Fx/Controls/Toolbar","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Services/GlobalSearchProviders/SearchProviderUtils","MsPortalImpl/Services/Services.Util","Fx/Assets/AssetTypes","FxHubs/ResourceCommands/BrowseCommanding","FxInternal/Lifetime","MsPortalImpl/UI/UI.BladeOpener"],(function(e,r,t,s,a,o,i,l,c,n,u,d){"use strict";r.ServiceSearchProvider=void 0;var p=MsPortalFx.Base,h=p.Diagnostics,m=p.Images.Polychromatic,S=(MsPortalFx.Extension.BrowseType,h.Telemetry);const v=h.createLog(e),y=/^[GTD][A-Z0-9]{9}$|^E[B-Z0-9][A-Z0-9]{8}$/;function P(e,r,t,s,a,i,l){const c=t;if(c.isLoading(!1),l)c.error(o.Search.error.format(c.displayName,l)),c.showSeeMore(!1);else{const t=e.resultsSet.slice(0,s),o=e.resultsSet.slice(s);c.error(null),c.moreLinkType(5),c.showSeeMore(e.totalCount>s),c.results(t),c.additionalResults(o),c.totalResultsCount(e.totalCount),a(i,c.moreResultsLinkText),r.value(` (${c.totalResultsCount()>=100?"99+":c.totalResultsCount()})`)}}let g=r.ServiceSearchProvider=class{constructor(e){this._diContainer=e,this._resultCount=8,this._ltm=new FxImpl.TriggerableLifetimeManager,this.supportedPills=["Services"],this._assetTypesPromise=(0,c.getAllAssetTypes)({includeBrowseManifest:!0}).then((e=>MsPortalFx.extendArrayIntoMap(Object.create(null),e,(e=>e.resourceType&&e.resourceType.toLowerCase()),(e=>e.resourceType&&e)))),this._bladeManagement={openBlade:r=>e.get(d.BladeOpener).openBlade(r,{flags:8,telemetryName:"GlobalSearch"}),openContextPane:r=>e.get(d.BladeOpener).openBlade(r,{flags:9,telemetryName:"GlobalSearch"}),openBladeAsync:()=>Promise.resolve(!1),openContextPaneAsync:()=>Promise.resolve(!1)}}dispose(){this._ltm.dispose()}performSearch(e){return this.searchServices(e).then((e=>P(e,this._servicesPill,this._resultSections[0],this._resultCount,this._subscribeAndUpdateSeeMoreText,this._ltm)),(r=>{v.error("Failed to get services results for criteria {0} with error: ".format((0,l.redactSensitiveData)(e)),null,r),P(null,this._servicesPill,this._resultSections[0],this._resultCount,this._subscribeAndUpdateSeeMoreText,this._ltm,FxImpl.Azure.buildSimplifiedError(r.jqXHR||r).message)}))}createProviderPills(e,r,t){return this._subscribeAndUpdateSeeMoreText=t.subscribeAndUpdateSeeMoreText,this._shouldShowMatchedWithHighlights=t?.showHighlightInServicesSection,this._shouldShowCommandsOnHover=t?.showServicesCommandsOnHover,this._servicesPill=(0,i.createPill)(o.Search.servicesCategory,e,r),t?.searchResultsCount&&(this._resultCount=t.searchResultsCount),[this._servicesPill]}setResultSections(e){this._resultSections=e}searchServices(e){const r=S.start({source:"Search",action:"SearchServices"});if(y.test(e)){const t=[{displayName:o.Search.viewInvoice,id:"InvoicesBlade",icon:m.File(),isPreview:!1,detailsType:2,keywordsMatch:[],resultType:"BrowseItem",deepLink:"#blade/Microsoft_Azure_GTM/InvoiceDetailsBlade/invoiceId/{0}".format(e),origDisplayName:o.Search.viewInvoice,origAssetType:"InvoicesBlade"}];return S.completeTrace(r,{services:t.length,isInvoice:!0}),Promise.resolve({totalCount:1,resultsSet:t})}{const s=this._diContainer.get(t.FavoritesManagerDeferred),i=s.filterAllServices({source:"GlobalSearch",filter:e,possibleFavorites:null,dontApplyVisibility:!0,showKeywordAndTypeMatches:this._shouldShowMatchedWithHighlights,includePortalServices:!0,includeServiceHubs:!0});return Promise.all([i,this._assetTypesPromise]).then((([e,t])=>{const i=e.filteredTypes.filter((e=>!e.isFilteredOut()&&!e.isHidden()&&e.relevanceScore())).sort(((e,r)=>e.relevanceScore()-r.relevanceScore())).slice(0,30).map((e=>{const r=new u.TriggerableLifetimeManager;let i;if(this._shouldShowCommandsOnHover){const o=t[e.assetType?.assetTypeManifest.resourceType?.resourceTypeName?.toLowerCase()],l=o&&(0,n.createServiceHoverCardCommand)({showIcon:!0,showLabel:!1,showCustomIcon:!1},"GlobalSearch",null,o?.browseManifest,r,(()=>e.assetType?.extension),e?.assetType?.lowerCaseResourceType,this._bladeManagement,e.isDisabled,o?.hiddenCommands,e.kind),c=[];if(l)c.push(l);else{const t=s.getCreateCommandForService({buttonOptions:{showIcon:!0,showLabel:!1,showCustomIcon:!1},lifetime:r,assetTypeInfo:e,source:"GlobalSearch",supplyAdditionalTelemetryData:null,openedBy:3,telemetryName:"GlobalSearchServices"});t&&c.push(t)}i=a.create(r,{items:c,showLabels:!0})}const l=3===e.assetType?.assetTypeManifest.browseType,c=e.isPreview?o.Search.previewLabelFmt.format(e.label):e.label,d=e.matches(),p=this._shouldShowMatchedWithHighlights&&d.highLightedDisplayName||e.label,h=this._shouldShowMatchedWithHighlights&&!d.highLightedDisplayName&&d.highLightedSecondaryName;return{displayName:p,id:e.id,icon:e.image,isPreview:e.isPreview,detailsType:l?2:1,keywordsMatch:h,secondaryName:h,resultType:"BrowseItem",deepLink:e.uri,origDisplayName:c,origAssetType:e.id,isVisible:ko.observable(),isExternal:l,isDisabled:e.isDisabled,commandsToolbar:i,isFavorite:e.isFavorite,typeName:e.portalService?.serviceHubDisplayName,favoriteType:e}}));return S.completeTrace(r,{services:i.length}),{totalCount:e.matchCount,resultsSet:i}}))}}};r.ServiceSearchProvider=g=__decorate([__metadata("fx:diagnostics",[e,"ServiceSearchProvider"]),s.Class(),__metadata("design:paramtypes",[s.Container])],g)})),
define("MsPortalImpl/Services/Services.PillsAsyncSearch",["require","exports","Fx/DependencyInjection","MsPortalImpl/Services/GlobalSearchProviders/ServiceSearchProvider","MsPortalImpl/Services/GlobalSearchProviders/ResourceAndResourceGroupsProvider","MsPortalImpl/Services/GlobalSearchProviders/MarketplaceAndDocumentationProvider","MsPortalImpl/Services/GlobalSearchProviders/AadSearchProvider","Fx"],(function(e,r,t,s,a,o,i,l){"use strict";r.showServices=r.showResourcesAndResourceGroups=r.showMarketplaceAndDocumentation=r.showAadSection=r.searchSettings=r.PillsAsyncSearchService=void 0;var c=MsPortalFx.Base.Diagnostics,n=c.Telemetry;const u=r.searchSettings=window.fx.environment.globalSearch,d=r.showServices=u&&!u.hideServices||!u,p=r.showResourcesAndResourceGroups=u&&!u.hideResourcesAndResourceGroups||!u,h=r.showMarketplaceAndDocumentation=u&&!u.hideMarketplaceAndDocumentation||!u,m=r.showAadSection=u&&!u.hideAzureActiveDirectory||!u,S=c.createLog(e);let v=r.PillsAsyncSearchService=class{constructor(e,r,t,s){this._servicesSearchProvider=e,this._resourceAndResourceGroupsProvider=r,this._marketplaceAndDocsProvider=t,this._aadSearchProvider=s,this._providers=[],d&&this._providers.push(this._servicesSearchProvider),p&&this._providers.push(this._resourceAndResourceGroupsProvider),h&&this._providers.push(this._marketplaceAndDocsProvider),m&&this._providers.push(this._aadSearchProvider)}initialize(e,r,t,s){let a=[];return this._providers.forEach((o=>{a=a.concat(o.createProviderPills(e,r,s));const i=t.filter((e=>o.supportedPills.includes(e.matchingPillName)));o.setResultSections(i)})),a}search(e,r){const t=e.criteria,s=n.start({source:"Search",action:"ExecuteQuery"});let a;return t&&1===t.length?(r.resultsPanel().forEach((e=>{e.results([]),e.isLoading(!0)})),a=d&&this._servicesSearchProvider.performSearch(t)):a=d&&l.delay(100).then((()=>{if(t===r.filter())return this._servicesSearchProvider.performSearch(t)})),l.delay(500).then((()=>{if(t===r.filter())return Promise.all([p&&this._resourceAndResourceGroupsProvider.performSearch(t,r.filter),d&&a,h&&this._marketplaceAndDocsProvider.performSearch(t),m&&this._aadSearchProvider.performSearch(t)]).then((()=>{n.completeTrace(s,{resultsCount:r.resultsPanel().map((e=>(e.results()||[]).length)).reduce(((e,r)=>e+r),0)})}),(e=>{n.cancelTrace(s,{error:e}),S.error("Failed to perform search. Error: {1}".format(e))})).finally((()=>{r.isSearchComplete(!0)}))}))}};r.PillsAsyncSearchService=v=__decorate([__metadata("fx:diagnostics",[e,"PillsAsyncSearchService"]),t.Class(),__metadata("design:paramtypes",[s.ServiceSearchProvider,a.ResourceAndResourceGroupsProvider,o.MarketplaceAndDocumentationProvider,i.AadSearchProvider])],v)}));