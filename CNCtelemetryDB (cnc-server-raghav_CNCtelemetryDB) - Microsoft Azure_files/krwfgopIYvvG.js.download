define("MsPortalImpl/Extension/CopilotMetadataCache",["require","exports","MsPortalImpl/Extension/Extension.Manifest","Fx/Ajax"],(function(t,e,a,n){"use strict";e.getCopilotMetadata=async function(t,e,i){const s=t.get(a.ManifestCache),r=(await s.getManifestAsync("Microsoft_Azure_CopilotMetadata","assetTypes")).pageVersion,c=function(t,e){const a=MsPortalEarly.ExtensionLoader.getUri(t),n=function(t){return t.stamp&&t.isSideloaded&&!t.isTestExtension}(t)||function(t){return!t.stamp&&!t.isSideloaded&&!t.isTestExtension}(t)?MsPortalFx.pathJoin("/",a,"Content",e):MsPortalFx.pathJoin("/",a,"Content");return n}(e,r);try{return await(0,n.ajax)({uri:MsPortalFx.pathJoin("/",c,"generated",i),useRawAjax:!0})}catch(t){return o.trace({source:"CopilotMetadataCache",action:"CannotFetchGeneratedContent",actionModifier:o.ActionModifier.Mark,data:{extensionUri:c,content:i,status:t?.jqXHR?.status}}),""}};var o=MsPortalFx.Base.Diagnostics.Telemetry}));