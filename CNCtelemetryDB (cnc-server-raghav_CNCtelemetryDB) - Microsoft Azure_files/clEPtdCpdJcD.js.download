define("MsPortalImpl/UI/Compositions/UI.Composition.BladeHistory",["require","exports","Fx/DependencyInjection"],(function(e,t,s){"use strict";t.BladeHistory=void 0;const o=MsPortalFx.Base.Diagnostics.createLog(e);let i=t.BladeHistory=class{constructor(){this._history=[],this._openBlades=new Map}getEntries(){return this._history.slice()}recordBladeOpened(e){if(e.locator){let t={};try{const s=e.getInputsOnlyViewModel();t=MsPortalFx.clone(s,!0),Object.keys(t).forEach((e=>t[e]=ko.unwrap(t[e])))}catch(e){o.warning("Parsing of the input parameters failed with an error: ",e)}const s={bladeReference:{bladeName:e.locator.name,extensionName:e.locator.getExtensionLocator().name,parameters:t},timestamp:Date.now()};this._history.unshift(s),this._openBlades.set(e.id,s),this._history.length>30&&this._history.pop(),e.registerForDispose((()=>this._recordBladeClosed(e)))}}getBladeById(e){return this._openBlades.get(e)}_recordBladeClosed(e){const t=this._openBlades.get(e.id);t&&(t.duration=Date.now()-t.timestamp),this._openBlades.delete(e.id)}};t.BladeHistory=i=__decorate([__metadata("fx:diagnostics",[e,"BladeHistory"]),s.Class()],i)}));