define("@microsoft/azureportal-reactview/Navigation",["require","exports","react","@microsoft/azureportal-reactview/Az","@microsoft/azureportal-reactview/ResourceManagement","@microsoft/azureportal-reactview/internal/ReactView","@microsoft/azureportal-reactview/Environment","@azure/portal-internal-shared/lib/LinkUtils","@azure/portal-internal-shared/lib/LinkSanitizer","@microsoft/azureportal-reactview/Experimentation"],(function(e,n,t,r,o,a,i,s,l,u){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.menuBlade=n.MoveType=n.BladeReference=n.TroubleshootingLinks=n.BladeReferences=n.BladeClosedReason=n.HelpPaneState=void 0,n.getBladeLink=function(e){return Promise.resolve(R(e))},n.getViewUrl=R,n.sanitizeLink=function(e){return Promise.resolve(B(e))},n.getSafeLink=B,n.getArmErrorsBladeReference=function(e){return c.getArmErrorsBladeReference(e)},n.getAutomationBladeReference=function(e){return c.getAutomationBladeReference(e)},n.getResourceBladeReference=function(e,n){return c.getResourceBladeReference({resourceId:e,resourceKind:n})},n.getTagsBladeReference=function(e){return c.getTagsBladeReference(e)},n.getEditTagsBladeReference=function(e,n){return c.getEditTagsBladeReference({resourceId:e,tagName:n.tagName}).then((e=>(e.onClosed=n.onClosed,e)))},n.getMoveResourceBladeReference=function(e,n){const t=(0,i.isFeatureEnabled)("moveresourcesreact"),r=(0,i.isFeatureEnabled)("resourcesextmoveresources"),o=t?"MoveResources.ReactView":"MoveResourceBlade",a=t&&r?"Microsoft_Azure_Resources":"HubsExtension";return Promise.resolve({bladeName:o,extensionName:a,parameters:{resourceId:e,moveType:n}})},n.getMoveLocationBladeReference=function(e,n){if(0===e.length)throw new Error("You must specify at least one resource to move");const t=o.ArmId.parse(e[0],!0).subscription,r=e.find((e=>o.ArmId.parse(e,!0).subscription!==t));if(r)throw new Error(`All resources must have the same subscriptionId ${r} did not match ${t}`);return c.getMoveLocationBladeReference({resourceIds:e,sourceRegion:n,subscriptionId:t})},n.handleTagsContextPaneResults=function(e,n){const t=new Map;return t.set(e,JSON.parse(n)),c.handleTagsContextPaneResults({resourceId:e,resourceToTagsMap:t})},n.updateSoftDeleteInfo=function(e,n,t,r){return c.updateSoftDeleteInfo({resourceId:e,currentSoftDeleteEnabled:n,newSoftDeleteEnabled:t,newRetentionTime:r})},n.hasMenuItem=function(e){return c.hasMenuItem(e)},n.getCurrentDeepLink=y,n.addDeepLinkChangeListener=T,n.useDeepLink=function(){let e=null;null===L&&(e=c.getInitialDeepLink(),L="string"==typeof e?e:"");const[n,r]=t.useState(L);return t.useEffect((()=>{let n=!1;const t=e=>{n||e===L||(L=e,r(L))};e instanceof Promise?e.then(t):y().then(t);const o=T(t);return()=>{n=!0,o()}}),[]),n},n.useSideBarLayoutMode=function(){let e=null;null===D&&(e=c.getLatestSideBarLayoutMode(),D="number"==typeof e?e:0);const[n,r]=t.useState(D);return t.useEffect((()=>{const n=e=>{e!==D&&(D=e,r(D))};return e instanceof Promise?e.then(n):n(e),c.addSideBarLayoutModeEventHandler(n)}),[]),n},n.openHelpPane=function(e){return c.openHelpPane(e)},n.executeInCloudShell=function(e,...n){const t="string"==typeof e?{cliType:e}:e;return c.executeInCloudShell({options:t,commands:n})},n.navigateToHome=function(){c.navigateToHome()},n.navigateToDashboard=function(e){r.navigateToDashboard(e)},n.toggleSideBar=function(){c.toggleSideBar()},n.navigateToDeepLink=function(e){c.navigateToDeepLink(e)},n.getRecentBlades=function(){return c.getRecentBlades()},n.isMinimized=function(){return a.ReactView.getInstance(!0).getIsMinimized()},n.openBlade=function(e,n){return r.openBlade(e,n)},n.openContextPane=function(e){return r.openContextPane(e)},n.closeChildBlade=function(){return r.closeChildBlade()},n.closeContextBlade=function(){return r.closeContextBlade()},n.toggleFullScreen=function(){c.toggleFullScreen()},n.requestNavigationToTrustedUrl=function(e,n){return c.requestNavigationToTrustedUrl({url:e,source:d(),forceRelogin:n?.forceRelogin})},n.HelpPaneState=r.HelpPaneState,n.BladeClosedReason=r.BladeClosedReason;const c=__InternalAzurePortal.AzInternalApi.internalApi,d=()=>(0,i.getEnvironmentValue)("extensionName"),f=()=>a.ReactView.getInstance().getPortalUri(),p=()=>a.ReactView.getInstance().getHashQueryString(),m=()=>a.ReactView.getInstance().getTrustedDomainLists();var g,v;n.BladeReferences={forBlade:e=>I(d(),e),forMenuBlade:(e,n,t)=>k(d(),e,n,t),forMarketplace:()=>I("",""),forCreateAssetType:()=>I("",""),forExtension:e=>({forBlade:n=>I(e,n),forMenuBlade:(n,t,r)=>k(e,n,t,r),forCreateAssetType:()=>I(e,"")})},function(e){e[e.CommonDeploymentErrors=0]="CommonDeploymentErrors",e[e.ResourceMoveDocs=1]="ResourceMoveDocs",e[e.CreateArmTemplateDocs=2]="CreateArmTemplateDocs"}(g||(n.TroubleshootingLinks=g={}));function R(e){const n={viewParameters:e.parameters,extensionName:e.extensionName,viewName:e.bladeName,v2DeepLink:!1,portalUri:f(),hashQuery:p()};return(0,s.getViewDeepLink)(n)}function B(e){const n=d(),{shellTrustedLinkedDomains:t,trustedLinkedDomains:o,linkedDomainMap:a}=m();return(0,l.getLinkSanitizer)({domainValidatorLoggingOptions:{effectiveLocale:r.effectiveLocale,logFailures:(e,n,t,o,a)=>r.log([{level:1,timestamp:Date.now(),area:"SharedLinkSanitizer",message:`URI "${e}" (domain "${n}") failed validateDomain; reason: "${t}"; effective locale: "${o}"; trustedDomains: ${a}`}])},experimentation:{verifyExternalLinksExperiment:()=>u.shellAssignments.getBooleanValue("verifyexternallinks"),verifyExternalLinksFeature:()=>(0,i.isFeatureEnabled)("verifyexternallinks"),verifyTopLevelDomainsFeature:()=>(0,i.isFeatureEnabled)("verifytopleveldomains")},extensionName:n,linkedDomainMap:a,logError:(e,t)=>r.log([{level:2,timestamp:Date.now(),area:n,message:t}]),portalUri:r.portalOrigin,shellTrustedLinkedDomains:t,trustedLinkedDomains:o}).getSafeLink(e,n)}function y(){return c.getCurrentDeepLink()}function T(e){return c.addDeepLinkEventHandler(e)}n.BladeReference=class{},function(e){e[e.Subscription=0]="Subscription",e[e.ResourceGroup=1]="ResourceGroup",e[e.SubscriptionAndResourceGroup=3]="SubscriptionAndResourceGroup",e[e.None=4]="None"}(v||(n.MoveType=v={}));let L=null;let D=null;function I(e,n){return{createReference:function(t){if(t){const{marketplaceId:r,marketplaceOptions:o,doesProvisioning:a,subscriptionId:i,catalogId:s,assetType:l,assetKind:u,telemetryId:c}=t;if(r||o||a||l)return{bladeName:n,extensionName:e,parameters:t.parameters,onClosed:t.onClosed,marketplaceId:r,subscriptionId:i,catalogId:s,telemetryId:c,marketplaceOptions:o,createAssetType:l,createAssetKind:u,referenceType:3};if(t.supplyInitialData||t.supplyProviderConfig||t.receiveResult)return{bladeName:n,extensionName:e,parameters:t.parameters,onClosed:t.onClosed,supplyInitialData:t.supplyInitialData,supplyProviderConfig:t.supplyProviderConfig,receiveResult:t.receiveResult,referenceType:1}}return{referenceType:0,extensionName:e,bladeName:n,parameters:t?.parameters,onClosed:t?.onClosed}}}}function k(e,n,t,r){return{createReference:function(o){return{extensionName:e,bladeName:n,parameters:o?.parameters,onClosed:o?.onClosed,referenceType:2,menuId:t,contentBladeReference:r}}}}n.menuBlade=r.menuBlade,delete n.menuBlade,Object.defineProperty(n,"menuBlade",{get:()=>r.menuBlade})}));