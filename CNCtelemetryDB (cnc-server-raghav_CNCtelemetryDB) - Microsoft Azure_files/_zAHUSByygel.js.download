define("@microsoft/azureportal-reactview/Deployments",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeploymentStatusCode=t.TemplateDeploymentMode=void 0,t.validateTemplate=function(e){return o.validateTemplate(e)},t.deployTemplate=function(e){return o.deployTemplate(e)},t.deployStack=function(e){return o.deployStack(e)},t.setMarketplaceId=function(e){return o.setMarketplaceId(e)},t.startCustomDeploy=function(){return o.initDeployCustom()},t.endCustomDeploy=function(e){return o.resolveDeployCustom({deploymentId:e})};const o=__InternalAzurePortal.AzInternalApi.internalApi;var r,n;!function(e){e[e.RequestDeploymentOnly=1]="RequestDeploymentOnly",e[e.DeployAndAwaitCompletion=2]="DeployAndAwaitCompletion",e[e.DeployAndGetAllOperations=3]="DeployAndGetAllOperations",e[e.PreflightOnly=4]="PreflightOnly"}(r||(t.TemplateDeploymentMode=r={})),function(e){e[e.Failure=-1]="Failure",e[e.Success=0]="Success",e[e.DeploymentRequestFailed=1]="DeploymentRequestFailed",e[e.DeploymentFailed=2]="DeploymentFailed",e[e.DeploymentStatusUnknown=3]="DeploymentStatusUnknown",e[e.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup",e[e.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest",e[e.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus",e[e.InvalidArgs=7]="InvalidArgs",e[e.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders",e[e.DeploymentCanceled=9]="DeploymentCanceled",e[e.UnknownError=10]="UnknownError"}(n||(t.DeploymentStatusCode=n={}))})),
define("@microsoft/azureportal-reactview/Footer",["require","exports","react","@microsoft/azureportal-reactview/Styling","@microsoft/azureportal-reactview/Css","@microsoft/azureportal-reactview/internal/ReactView"],(function(e,t,o,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;const i=(0,r.getClassNames)({footer:{"border-top":"1px solid lightgrey",overflow:"hidden"}});t.Footer=e=>o.createElement(a.ReactPortalContent,{containerId:"__bladeFooter"},o.createElement("div",{className:`${n.CSSClasses.Padding} ${i.footer}`},e.children))})),
define("@microsoft/azureportal-reactview/Provisioning",["require","exports","@microsoft/azureportal-reactview/Navigation","@microsoft/azureportal-reactview/Deployments","@microsoft/azureportal-reactview/internal/ReactView"],(function(e,t,o,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.doesProvisioning=function(){return a.doesProvisioning().then((e=>({...e,validateTemplate:r.validateTemplate,deployTemplate:r.deployTemplate,deployStack:r.deployStack,setMarketplaceId:r.setMarketplaceId,deployCustom:e=>(0,r.startCustomDeploy)().then((t=>(e.provisioningPromise.then((()=>(0,r.endCustomDeploy)(t))),e.provisioningPromise))),getArmErrorsBladeReference:o.getArmErrorsBladeReference,getAutomationBladeReference:o.getAutomationBladeReference})))},t.getInitialDropdownValues=function(){return n.ReactView.getInstance().getInitialDropdownValues()};const a=__InternalAzurePortal.AzInternalApi.internalApi})),
define("@microsoft/azureportal-reactview/LocationDropdown",["require","exports","@fluentui/react/lib/utilities/ThemeProvider/useTheme","@fluentui/react/lib/Button","@fluentui/react/lib/Label","@fluentui/react/lib/SelectableOption","@fluentui/react/lib/Stack","@fluentui/react/lib/Utilities","@microsoft/azureportal-reactview/Az","@microsoft/azureportal-reactview/BladeLink","@microsoft/azureportal-reactview/DataManagement","@microsoft/azureportal-reactview/FilterableDropdown","@microsoft/azureportal-reactview/FormLabel","@microsoft/azureportal-reactview/Locations","@microsoft/azureportal-reactview/Provisioning","@microsoft/azureportal-reactview/Shimmer","@microsoft/azureportal-reactview/internal/DefaultResourceValidation","@microsoft/azureportal-reactview/internal/ErrorBoundary","@microsoft/azureportal-reactview/internal/FormLabelValidationContextType","FxInternal/Resources/ReactComponents","react","react"],(function(e,t,o,r,n,a,i,s,l,c,u,d,p,m,g,f,b,v,y,S,x,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocationDropdown=t.LocationsScope=void 0,t.groupAndMapLocations=E;const h=e=>((0,m.useLocationValidationEffect)([e.selectedLocationId]),x.createElement(d.FilterableDropdown,{...e})),C=(0,p.withFormLabelAndValidation)(h),D=x.memo((function(e){const{customizeLocations:t,disableDefaultSelection:s,initialLocationName:d}=e,p=(()=>{const e=(0,o.useTheme)();return x.useMemo((()=>({dropdownItemHeader:{fontWeight:600,color:e.semanticColors.link,height:"36px",lineHeight:"36px",padding:"0 8px",userSelect:"none"},dropdownOptionText:{margin:"1px",textOverflow:"ellipsis",overflow:"hidden"},dropdownItemHeaderIcon:{color:e.semanticColors.link,marginBottom:-3}})),[e])})(),[v,D]=(0,w.useState)([]),[I,F]=x.useContext(b.DefaultResourceValidationContext),L=x.useContext(y.FormLabelValidationContext),T=I.skipDefault||!!L,N=x.useRef(null),R=x.useMemo((()=>e.resourceTypes),[JSON.stringify(e.resourceTypes)]),k="string"==typeof e.subscriptionId?e.subscriptionId:e.subscriptionId?.subscriptionId,{result:P,loading:z,error:A}=(0,u.useAsync)(m.getLocationsAndResourceTypes,[k,R],{disabled:0===e.scope&&!k,onError:e=>{l.log([{level:2,message:"Unable to retrieve locations",area:"LocationDropdown.tsx-getLocations",timestamp:Date.now(),args:[e]}])}}),V=A?`${S.LocationsDropdown.failedToLoad}: ${A.message}`:void 0,{result:B,loading:O}=(0,u.useAsync)(g.getInitialDropdownValues,[]),G=x.useMemo((()=>{if(P?.locations){const e=P.locations.map((e=>({id:e.name,...e})));return t?t(e):e}return[]}),[P,t]),M=(0,w.useMemo)((()=>[...G,...v]),[G,v]),H=(0,w.useMemo)((()=>({resourceTypes:P?.resourceTypeApis&&Object.entries(P.resourceTypeApis).map((([e,[t]])=>[e,t]))})),[P?.resourceTypeApis]),q=(0,m.useDeniedLocations)(G.map((e=>e.name)))||[],_=(0,w.useMemo)((()=>{const t=E(M,e.customizeDropdownOptions,q);return e.customizeOptions?e.customizeOptions(t):t}),[M,q.sort().join(",")]),[$,j]=(0,w.useState)(""),U=e.selectedLocationId||$,W=(t,o)=>{j(t||"");try{e.onLocationChange?.(t||"",o||null),e.onChange?.(void 0,o||null)}catch(e){l.log([{level:2,message:e,area:"LocationDropdown.tsx-onLocationChange",timestamp:Date.now()}])}};(0,w.useEffect)((()=>{if(N.current!==k&&H.resourceTypes&&!O){N.current=k,D([]),F(H);let e=null;const t=U.lastIndexOf("/")+1;if(t>1){const o=U.substring(t);e=G.find((e=>e.name===o))}else if(d)if("string"==typeof d)e=G.find((e=>e.name===d));else for(const t of d){if(e)break;e=G.find((e=>e.name===t))}if(e)W(e.id,e);else if(!s){const e=B?.locationNames?.length>0&&B.locationNames[0],t=e&&G.find((t=>t.name===e))||G[0];W(t?.id,t)}}}),[k,O,H,G]);const K={label:void 0,"aria-labelledby":e.ariaLabelledBy,"aria-required":e.ariaRequired,onRenderItem:(e,t)=>e.itemType===a.SelectableOptionMenuItemType.Header?x.createElement(i.Stack,{key:e.key,className:"ms-Dropdown-header",horizontal:!0,verticalAlign:"center",style:p.dropdownItemHeader},x.createElement("span",{className:"ms-Dropdown-optionText",style:p.dropdownOptionText},e.text),x.createElement(r.IconButton,{iconProps:{iconName:"Info"},ariaLabel:"Group info",style:p.dropdownItemHeaderIcon,title:e.title})):t(e),onChange:(e,t)=>{W(t.key,G.find((e=>e.id===t.key)))},selectedKey:U,selectedLocationId:U,options:_,ariaLabel:e.ariaLabel||S.LocationsDropdown.label,errorMessage:e.errorMessage||V,optionFilter:(e,t)=>{const o=e.data;return[o.regionalDisplayName,o.displayName,o.name].some((e=>e.toLocaleLowerCase().includes(t)))}};return x.createElement("div",null,T&&e.label&&x.createElement(n.Label,null,e.label),x.createElement(f.Shimmer,{stretch:!0,isDataLoaded:!z&&!O},T?x.createElement(h,{...e,...K}):x.createElement(C,{...e,...K,formLabelProps:{displayValue:e.label||S.LocationsDropdown.label,hideLabel:!e.label}}),e.enableEdgeLocations&&x.createElement(c.BladeLink,{key:"EdgeLocationLink",openAsContextPane:!0,bladeReference:{extensionName:"Microsoft_Azure_Compute",bladeName:"EdgeZonesPicker.ReactView",onClosed(e,t){2===e&&t?.id&&(D([t]),W(t.id,t))}}},S.LocationsDropdown.edgeLocationsLabel)))}));var I;function E(e,t,o){const r=[],n=[],i=[],l=[],c=[],u={key:"providedHeader",text:S.LocationsDropdown.serviceProvided,itemType:a.SelectableOptionMenuItemType.Header,title:S.LocationsDropdown.providedHeaderInfo},d={key:"recommendedHeader",text:S.LocationsDropdown.recommended,itemType:a.SelectableOptionMenuItemType.Header,title:S.LocationsDropdown.recommendedHeaderInfo},p={key:"otherHeader",text:S.LocationsDropdown.other,itemType:a.SelectableOptionMenuItemType.Header,title:S.LocationsDropdown.otherHeaderInfo},m={key:"policyDisabled",text:S.LocationsDropdown.restricted,itemType:a.SelectableOptionMenuItemType.Header,title:S.LocationsDropdown.restrictedHeaderInfo};return e.forEach((e=>{if(o?.includes(e.name))c.push(e);else switch(e.metadata&&e.metadata.regionCategory){case"ServiceProvided":n.push(e);break;case"Recommended":i.push(e);break;case"Other":l.push(e)}})),n.length&&(r.push(u),r.push(...F(n,t).map((e=>({...e,ariaLabel:e.ariaLabel??(0,s.format)(S.LocationsDropdown.optionAriaLabel,S.LocationsDropdown.serviceProvided,e.text)})))),r.push({key:"providedDivider",text:"-",itemType:a.SelectableOptionMenuItemType.Divider})),i.length&&(r.push(d),r.push(...F(i,t).map((e=>({...e,ariaLabel:e.ariaLabel??(0,s.format)(S.LocationsDropdown.optionAriaLabel,S.LocationsDropdown.recommended,e.text)})))),r.push({key:"recommendedDivider",text:"-",itemType:a.SelectableOptionMenuItemType.Divider})),l.length&&(r.push(p),r.push(...F(l,t).map((e=>({...e,ariaLabel:e.ariaLabel??(0,s.format)(S.LocationsDropdown.optionAriaLabel,S.LocationsDropdown.other,e.text)}))))),c.length&&(r.push(m),r.push(...F(c,t).map((e=>({...e,ariaLabel:e.ariaLabel??(0,s.format)(S.LocationsDropdown.optionAriaLabel,S.LocationsDropdown.restricted,e.text)}))))),r}function F(e,t){return e.sort(((e,t)=>e.metadata.geographyGroup===t.metadata.geographyGroup?e.displayName<t.displayName?-1:1:e.metadata.geographyGroup<t.metadata.geographyGroup?-1:1)).map((e=>{const o=t&&t(e,{text:e.regionalDisplayName});return{key:e.id,text:e.regionalDisplayName,data:e,...o}}))}!function(e){e[e.Subscription=0]="Subscription",e[e.Tenant=1]="Tenant"}(I||(t.LocationsScope=I={})),t.LocationDropdown=(0,v.withErrorBoundary)(D,"LocationDropdown")})),
define("@microsoft/azureportal-reactview/ResourceGroups",["require","exports","@microsoft/azureportal-reactview/internal/ReactView"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getResourceGroups=function(e){return o.ReactView.getInstance().getResourceGroups(e)},t.validateResourceGroup=function(e){return r.validateResourceGroup(e)};const r=__InternalAzurePortal.AzInternalApi.internalApi})),
define("@microsoft/azureportal-reactview/ResourceGroupDropdown",["require","exports","react","@microsoft/azureportal-reactview/Az","react","@microsoft/azureportal-reactview/internal/ErrorBoundary","FxInternal/Resources/ReactComponents","@fluentui/react/lib/Callout","@fluentui/react/lib/Link","@fluentui/react/lib/TextField","@fluentui/react/lib/Separator","@microsoft/azureportal-reactview/ResourceManagement","@fluentui/react/lib/Button","@microsoft/azureportal-reactview/ResourceGroups","@fluentui/react/lib/Utilities","@microsoft/azureportal-reactview/Shimmer","@microsoft/azureportal-reactview/FilterableDropdown","@fluentui/react/lib/Label","@microsoft/azureportal-reactview/Provisioning","@microsoft/azureportal-reactview/internal/DefaultResourceValidation","@microsoft/azureportal-reactview/DataManagement"],(function(e,t,o,r,n,a,i,s,l,c,u,d,p,m,g,f,b,v,y,S,x){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceGroupDropdown=void 0;const w=e=>{const[t,r]=(0,n.useState)(""),[a,l]=(0,n.useState)(!1);return o.createElement(s.Callout,{target:e.linkRef,onDismiss:()=>e.dismiss(),style:{maxWidth:"370px"},setInitialFocus:!0,styles:{root:{zIndex:1e3}}},o.createElement("div",{style:{padding:"20px"}},o.createElement("p",null,i.ResourceGroupDropdown.description),o.createElement(c.TextField,{required:!0,validateOnLoad:!1,label:i.ResourceGroupDropdown.name,onChange:(e,t)=>r(t),onGetErrorMessage:()=>(0,m.validateResourceGroup)({existingResourceGroupNames:e.existingResourceGroupNames,resourceGroupName:t,subscriptionId:e.subscriptionId}).then((t=>(l(t.valid),t.message||!t.valid&&i.ResourceGroupDropdown.unknownValidationError.replace("{0}",e.subscriptionId))),(t=>(l(!1),(0,g.format)(i.ResourceGroupDropdown.unknownValidationError,e.subscriptionId))))})),o.createElement(u.Separator,{styles:{root:{padding:0,height:"1px"}}}),o.createElement("div",{style:{padding:"20px"}},o.createElement(p.PrimaryButton,{text:i.ResourceGroupDropdown.ok,disabled:!t||!a,style:{marginRight:"10px"},onClick:()=>e.dismiss(t)}),o.createElement(p.DefaultButton,{text:i.ResourceGroupDropdown.cancel,onClick:()=>e.dismiss()})))},h=o.memo((function(e){const[t,a]=(0,n.useState)(null),[s,c]=(0,n.useState)(!1),u=o.useRef(),[,p]=o.useContext(S.DefaultResourceValidationContext),{result:g,loading:h,error:C}=(0,x.useAsync)((async e=>{const t=(await(0,m.getResourceGroups)({subscriptionIds:[e]})).map((e=>({...e,resourceId:e.id}))),o=Intl.Collator(void 0,{sensitivity:"base"});return t.sort(((e,t)=>o.compare(e.name,t.name))),t}),[e.subscriptionId],{disabled:!e.subscriptionId,onError:e=>{r.log([{level:2,message:"Unable to retrieve resource groups",area:"ResourceGroupDropdown.tsx-getResourceGroups",timestamp:Date.now(),args:[e]}])}}),D=(0,n.useMemo)((()=>g||[]),[g]),I=C?`${i.ResourceGroupDropdown.failedToLoad}: ${C.message}`:void 0,{result:E,loading:F}=(0,x.useAsync)(y.getInitialDropdownValues,[]),[L,T]=(0,n.useState)({}),N=o.useRef({}),[R,k,P]=(0,n.useMemo)((()=>{let t=e.selectedResourceGroupId??L.group?.id,o=!1,r=!1;if((!e.createNew||N.current.group&&N.current.subscriptionId!==e.subscriptionId)&&(N.current={}),e.createNew&&g&&e.subscriptionId)if("string"==typeof e.selectedResourceGroupId){let r=e.newResourceGroupName,n=!0;if(e.selectedResourceGroupId){const t=d.ArmId.parse(e.selectedResourceGroupId,!0);if(t.subscription===e.subscriptionId){D.find((e=>e.name.toLowerCase()===t.resourceGroup.toLowerCase()))?r="":(r=t.resourceGroup,n=!1)}}if(r){const a=`/subscriptions/${e.subscriptionId}/resourceGroups/${r}`;N.current={group:{id:a,location:"",name:r,resourceId:a},subscriptionId:e.subscriptionId,validated:!1,isDefaultNewGroup:n},t=a,o=!0}}else{if(e.newResourceGroupName&&(!N.current.group||N.current.isDefaultNewGroup)){const o=`/subscriptions/${e.subscriptionId}/resourceGroups/${e.newResourceGroupName}`;N.current.group?.id!==o&&(r=!!N.current.group&&L.new,N.current={group:{id:o,location:"",name:e.newResourceGroupName,resourceId:o},subscriptionId:e.subscriptionId,validated:!1,isDefaultNewGroup:!0}),L.new&&(t=o)}o=L.new&&!!N.current.group}return[t,o,r]}),[e.createNew,N.current.group,N.current.subscriptionId,N.current.isDefaultNewGroup,e.subscriptionId,g,e.selectedResourceGroupId,L,e.newResourceGroupName]),{result:z,loading:A}=(0,x.useAsync)((async(e,t,o)=>(0,m.validateResourceGroup)({resourceGroupName:e,subscriptionId:t,existingResourceGroupNames:o.map((e=>e.name))})),[N.current.group?.name,e.subscriptionId,D],{disabled:!N.current.group||N.current.validated}),V=N.current.validated||z?.valid,B=(0,n.useMemo)((()=>{const t=[],o=new Set,r=[];N.current.group&&V&&r.push({group:N.current.group,new:!0}),r.push(...D.map((e=>({group:e,new:!1}))));for(const n of r)if(!o.has(n.group.id)){o.add(n.group.id);const r=n.new?i.ResourceGroupDropdown.newGroup.replace("{0}",n.group.name):n.group.name,a=e.customizeOptions?.(n.group,{text:r});t.push({key:n.group.id,text:r,data:n,...a})}return t}),[D,N.current.group,V]),O=(t,o)=>{const n=t?.name||"";u.current=e.subscriptionId,p({resourceGroup:n,createNew:o}),T({group:t,new:o});try{e.onResourceGroupChange?.(n,t,o),e.onChange?.(void 0,t,o)}catch(e){r.log([{level:2,message:e,area:"ResourceGroupDropdown.tsx-onLocationChange",timestamp:Date.now()}])}};return(0,n.useEffect)((()=>{P&&O(N.current.group,!0)}),[P,N.current.group]),(0,n.useEffect)((()=>{if(e.subscriptionId&&u.current!==e.subscriptionId&&!h&&!F&&!A){if(k)return void O(N.current.group,!0);if(R){const e=B.find((e=>e.data.group.id===R));if(e)return void O(e.data.group,e.data.new)}if(N.current.group&&N.current.isDefaultNewGroup)return void O(N.current.group,!0);if(!e.disableDefaultSelection&&D.length){const t=E?.subscriptionIds?.[0],o=t===e.subscriptionId?E.resourceGroupNames?.[0]:void 0,r=o&&D.find((e=>e.name.toLowerCase()===o.toLowerCase()))||D[0];O(r,!1)}else L.group&&O(void 0,!1)}}),[e.subscriptionId,u.current,h,F,A,k,N.current.group,R,B,e.disableDefaultSelection,D,E]),o.createElement("div",{className:e.className,"aria-label":e.ariaLabel},e.label&&o.createElement(v.Label,null,e.label),o.createElement(f.Shimmer,{stretch:!0,isDataLoaded:!h&&!F},o.createElement(b.FilterableDropdown,{...e,errorMessage:e.errorMessage||I,label:void 0,"aria-labelledby":e.ariaLabelledBy,"aria-required":e.ariaRequired,onChange:(e,t)=>{t.data&&O(t.data.group,t.data.new)},options:B,selectedKey:R,ariaLabel:e.ariaLabel||i.ResourceGroupDropdown.title})),e.createNew&&e.subscriptionId&&o.createElement(l.Link,{onClick:()=>c(!0)},o.createElement("span",{ref:a},i.ResourceGroupDropdown.createNew)),s&&e.subscriptionId&&o.createElement(w,{dismiss:t=>{if(t){const o=`/subscriptions/${e.subscriptionId}/resourceGroups/${t}`;N.current={group:{id:o,location:"",name:t,resourceId:o},subscriptionId:e.subscriptionId,validated:!0,isDefaultNewGroup:!1},O(N.current.group,!0)}c(!1)},linkRef:t,subscriptionId:e.subscriptionId,existingResourceGroupNames:D.map((e=>e.name))}))}));t.ResourceGroupDropdown=(0,a.withErrorBoundary)(h,"ResourceGroupDropdown")})),
define("@microsoft/azureportal-reactview/SubscriptionDropdown",["require","exports","react","@microsoft/azureportal-reactview/Az","react","@fluentui/react/lib/SelectableOption","FxInternal/Resources/ReactComponents","@microsoft/azureportal-reactview/internal/ErrorBoundary","@microsoft/azureportal-reactview/Subscriptions","@microsoft/azureportal-reactview/Shimmer","@microsoft/azureportal-reactview/Navigation","@microsoft/azureportal-reactview/FormLabel","@fluentui/react/lib/Label","@fluentui/react/lib/Link","@fluentui/react/lib/Stack","@microsoft/azureportal-reactview/Provisioning","@microsoft/azureportal-reactview/internal/DefaultResourceValidation","@microsoft/azureportal-reactview/FilterableDropdown","@microsoft/azureportal-reactview/DataManagement","@microsoft/azureportal-reactview/Experimentation"],(function(e,t,o,r,n,a,i,s,l,c,u,d,p,m,g,f,b,v,y,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionDropdown=void 0;const x={dropdownItemHeader:{fontWeight:600,height:"36px",lineHeight:"36px",padding:"0 8px",userSelect:"none"},dropdownOptionText:{margin:"1px",textOverflow:"ellipsis",overflow:"hidden"}},w=__InternalAzurePortal.AzInternalApi.internalApi,h=["enabled","active","pastdue"],C=o.memo((function(e){const{customizeOptions:t,disableDefaultSelection:s,onChange:C,onSubscriptionDropdownChange:D,...I}=e,[E,F]=(0,n.useState)(""),L=e.selectedSubscriptionId??E,[,T]=(0,n.useContext)(b.DefaultResourceValidationContext),N=o.useRef(!1),R=(0,y.useAsync)(f.getInitialDropdownValues,[]),k=(e,t,o)=>n=>{r.log([{level:e,message:t,area:o,timestamp:Date.now(),args:[n]}])},P=(0,y.useAsync)((async()=>(0,l.getGlobalSubscriptions)()),[],{onError:k(2,"Unable to retrieve subscriptions","SubscriptionDropdown.tsx-getGlobalSubscriptions")}),z=(0,y.useAsync)((async()=>(0,l.getSubscriptionsIsPartialSet)()),[],{onError:k(2,"Unable to retrieve subscriptions is partial set","SubscriptionDropdown.tsx-getGlobalSubscriptionsIsPartialSet")}),A=(0,y.useAsync)((async()=>r.getSelectedSubscriptions().then((e=>e.map((e=>e.subscriptionId))))),[],{onError:k(2,"Unable to retrieve subscriptions is partial set","SubscriptionDropdown.tsx-getGlobalSubscriptionsIsPartialSet")}),V=P.error?`${i.SubscriptionsDropdown.failedToLoad}: ${P.error.message}`:void 0,B=S.shellAssignments.getBooleanValue("subscriptionDropdownHeader"),O=(0,n.useMemo)((()=>B?(()=>{const e=P.result?.map((e=>{const o=t?.(e,{text:e.uniqueDisplayName});return{key:e.subscriptionId,text:e.uniqueDisplayName,data:e,disabled:!h.includes(e.state.toLowerCase()),...o}}))||[],o=[];let r=i.SubscriptionsDropdown.showingFiltered;z.result&&(r=i.SubscriptionsDropdown.showingPartial);let n=!1;P.completed&&(z.result&&(n=!0),A.result?.length||(n=!0)),n&&o.push({key:"Header",itemType:a.SelectableOptionMenuItemType.Header,text:r});let s=!1;const l=R.result?.lastUsedSubscriptionIds||[];if(l.length>0){const t=e.filter((e=>l.includes(e.key)));t.length>0&&(s=!0,o.push({key:"RecentHeader",itemType:a.SelectableOptionMenuItemType.Header,text:i.SubscriptionsDropdown.recent}),o.push(...t))}if(A.result&&A.result.length>0){const t=A.result,r=e.filter((e=>t.includes(e.key)&&!l.includes(e.key)));r.length>0&&(s=!0,o.push({key:"SelectedHeader",itemType:a.SelectableOptionMenuItemType.Header,text:i.SubscriptionsDropdown.selected}),o.push(...r))}const c=new Set([...l,...A.result||[]]),u=e.filter((e=>!c.has(e.key)));return u.length>0&&(s&&o.push({key:"AvailableHeader",itemType:a.SelectableOptionMenuItemType.Header,text:i.SubscriptionsDropdown.available}),o.push(...u)),o})():(()=>{const e=P.result?.map((e=>{const o=t&&t(e,{text:e.uniqueDisplayName});return{key:e.subscriptionId,text:e.uniqueDisplayName,data:e,disabled:!h.includes(e.state.toLowerCase()),...o}}))||[];let o=i.SubscriptionsDropdown.showingFiltered;return z.result&&(o=i.SubscriptionsDropdown.showingPartial),P.completed?[{key:"Header",itemType:a.SelectableOptionMenuItemType.Header,text:o},...e]:e})()),[P.result,A.result,R.result,z.result]),G=(t,o)=>{T({subscription:t}),F(t);try{e.onSubscriptionDropdownChange?.(t,o),e.onChange?.(void 0,o)}catch(e){r.log([{level:2,message:e,area:"SubscriptionDropdown.tsx-onLocationChange",timestamp:Date.now(),args:[e]}])}};(0,d.useValidationEffect)((()=>{const t=P.result?.find((e=>e.subscriptionId===L));return t?w.validateResourceProviderRegistration({subscription:t,resourceProviders:e.resourceProviders,requiredPermissions:e.requiredPermissions}).then((e=>e.valid?{state:2}:{state:3,message:e.message})):{state:2}}),[e.resourceProviders,L,P.result,e.requiredPermissions]),(0,n.useEffect)((()=>{if(!N.current&&P.result?.length&&!R.loading){N.current=!0;const e=L&&P.result.find((e=>e.subscriptionId===L));if(e)G(L,e);else if(!s){const e=R.result?.subscriptionIds?.length>0&&R.result.subscriptionIds[0],t=e&&P.result.find((t=>t.subscriptionId===e))||P.result.find((({state:e})=>h.includes(e.toLowerCase())));t&&G(t.subscriptionId,t)}}}),[P.result,R.loading,L]);const M=o.useRef({valueType:void 0,lastOpenTime:0});return o.createElement("div",null,e.label&&o.createElement(p.Label,null,e.label),o.createElement(c.Shimmer,{stretch:!0,isDataLoaded:!P.loading&&!R.loading},o.createElement(v.FilterableDropdown,{...I,errorMessage:e.errorMessage||V,label:void 0,"aria-labelledby":e.ariaLabelledBy,"aria-required":e.ariaRequired,onRenderItem:(e,t)=>{const[r,n]=e.text.split("{0}");return e.itemType===a.SelectableOptionMenuItemType.Header?["Header","SelectedHeader"].includes(e.key)?o.createElement(g.Stack,{key:e.key,className:"ms-Dropdown-header",horizontal:!0,verticalAlign:"center",style:x.dropdownItemHeader},o.createElement("span",{className:"ms-Dropdown-optionText",style:x.dropdownOptionText},r,o.createElement(m.Link,{role:"link",onClick:()=>(0,u.navigateToDeepLink)("#settings/subscriptions")},i.SubscriptionsDropdown.clickHere),n)):o.createElement("div",{key:e.key,className:"ms-Dropdown-header",style:x.dropdownItemHeader},o.createElement("span",{className:"ms-Dropdown-optionText",style:x.dropdownOptionText},e.text)):t(e)},onRenderContainer:(e,t)=>(M.current.lastOpenTime=Date.now(),I.onRenderContainer?.(e,t)||t(e)),onDismiss:()=>{const e=Date.now();r.trace([{source:"SubscriptionDropdown",action:"RecordOpenDuration",timestamp:e,data:{duration:e-M.current.lastOpenTime,valueType:M.current.valueType,subCount:O.length}}])},onChange:(e,t)=>{const o=t.data;o&&G(o.subscriptionId,o),R.result?.lastUsedSubscriptionIds?.includes(o.subscriptionId)&&(M.current.valueType="Recent"),A.result?.includes(o.subscriptionId)&&(M.current.valueType="Selected"),M.current.valueType="Available"},options:O,selectedKey:L,ariaLabel:e.ariaLabel||i.SubscriptionsDropdown.label,optionFilter:(e,t)=>{const o=e.data;return!!o&&[o?.uniqueDisplayName,o?.subscriptionId].some((e=>e.toLocaleLowerCase().includes(t)))}})))}));t.SubscriptionDropdown=(0,s.withErrorBoundary)(C,"SubscriptionDropdown")})),
define("@microsoft/azureportal-reactview/internal/Guid",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.newGuid=function(){const e=function(e){let t;const r=new Array(e);for(;e;){t=4294967296*Math.random()|0;let n=8;for(;n--;){if(r[--e]=o[15&t],e<0)return r;t>>>=4}}}(36);return e[8]=e[13]=e[18]=e[23]="-",e[14]="4",e[19]=o[8+(3&o.indexOf(e[19]))],e.join("").substring(0,36)};const o=[..."0123456789abcdef"]})),
define("@microsoft/azureportal-reactview/FormBuilder",["require","exports","react","@microsoft/azureportal-reactview/Az","FxInternal/Resources/ReactComponents","FxInternal/Resources/FormBuilderResources","@fluentui/react/lib/Button","@fluentui/react/lib/Icon","@fluentui/react/lib/Link","@fluentui/react/lib/Pivot","@fluentui/react/lib/Spinner","@fluentui/react/lib/Styling","@fluentui/react/lib/utilities/ThemeProvider/makeStyles","@microsoft/azureportal-reactview/internal/Guid","@microsoft/azureportal-reactview/internal/Creapi","@microsoft/azureportal-reactview/Footer","@microsoft/azureportal-reactview/DataManagement","@microsoft/azureportal-reactview/FormLabel","@microsoft/azureportal-reactview/LocationDropdown","@microsoft/azureportal-reactview/Provisioning","@microsoft/azureportal-reactview/ResourceGroupDropdown","@microsoft/azureportal-reactview/StatusBar","@microsoft/azureportal-reactview/SubscriptionDropdown","@microsoft/azureportal-reactview/ControlPlaneValidators","@microsoft/azureportal-reactview/Navigation","@microsoft/azureportal-reactview/Environment","@microsoft/azureportal-reactview/internal/ReactView","@microsoft/azureportal-reactview/BladeLink","@microsoft/azureportal-reactview/internal/ContextUtilities","@microsoft/azureportal-reactview/internal/FormTelemetry","@microsoft/azureportal-reactview/internal/SharedFormContext"],(function(e,t,o,r,n,a,i,s,l,c,u,d,p,m,g,f,b,v,y,S,x,w,h,C,D,I,E,F,L,T,N){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formBuilder=t.CreateFooter=t.SingleStepFooter=t.FormNavigationFooter=t.FormWizardNavigation=t.FormAsyncNavigation=t.FormSingleStepNavigation=t.ResourceScopeSection=t.ReviewStep=t.useFormTelemetry=t.useDeploymentOptions=t.useFormValidation=t.useFormNavigation=t.TemplateDeploymentScope=void 0,t.lazyStepContent=function(e){let t;return r=>{const n=(0,g.useId)().split(".")[1],{setLazyStepsLoadState:a}=o.useContext(Y);o.useEffect((()=>{a((e=>e[n]?e:{...e,[n]:"Awaiting"}))}),[]),void 0===t&&(t=e());const i=o.useMemo((()=>o.lazy((async()=>{const e=await t;return a((e=>({...e,[n]:"Loaded"}))),e}))),[]);return o.createElement(o.Suspense,{fallback:o.createElement(o.Fragment,null)},o.createElement(i,{...r}))}};const R=(0,v.withFormLabelAndValidation)(h.SubscriptionDropdown),k=(0,v.withFormLabelAndValidation)(x.ResourceGroupDropdown),P=(0,v.withFormLabelAndValidation)(y.LocationDropdown),z=()=>{},A="stepSection",V="sectionLabel",B=(0,d.mergeStyleSets)({navigationStep:{maxWidth:"700px",paddingLeft:8,[`& .${A}:first-child .${V}`]:{marginTop:"0"}},footerButton:{marginRight:"5px",marginBottom:"5px"},steppedWizardHeaderIcon:{height:20,width:20,marginRight:8,marginTop:2,display:"inline-flex",lineHeight:20,verticalAlign:-3},footer:{height:16},sectionLabel:[V,{margin:"10px 0px",fontSize:"14px",fontWeight:"600"}],sectionDescription:{marginBottom:"20px"},statusBarForwardIcon:{verticalAlign:"middle",marginLeft:"6px",fontSize:"10px"},pivotToolbar:{display:"flex",flexFlow:"column nowrap",height:"100%"},pivotItemContainer:{overflow:"auto",height:"100%",marginTop:"20px"},reviewSummary:{[`& .${A} .ms-Fabric div:first-child h3`]:{marginTop:"0"}},automationLink:{marginBottom:"16px",display:"flex",justifyContent:"center",alignItems:"center"},instanceDetails:{marginTop:"10px"},feedbackLink:{float:"right"},feedbackIcon:{marginRight:"5px"}}),O=(0,p.makeStyles)((({semanticColors:e})=>({hoverStyle:{paddingLeft:8,paddingRight:8,selectors:{"&:hover":{backgroundColor:e.buttonBackgroundHovered}}},stepValidationIconSuccess:{fontSize:"17px",marginRight:8,lineHeight:20,verticalAlign:"-2px",color:e.successIcon},stepValidationIconError:{fontSize:"17px",marginRight:8,lineHeight:20,verticalAlign:"-2px",color:e.errorIcon},stepValidationIconTabs:{width:17,height:17,maxWidth:17,maxHeight:17,float:"left",marginLeft:-2,marginRight:8,color:e.errorIcon},iconStyles:{root:{color:e.link},marginRight:2}}))),G={selectors:{"&::before":{backgroundColor:"#0078d4",bottom:0,content:"",left:8,right:8,height:2,position:"absolute",transition:"left 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s  right 0.267s cubic-bezier(0.1, 0.25, 0.75, 0.9) 0s"},"&:hover::before":{left:0,right:0}}},M=e=>o.createElement("span",{className:B.steppedWizardHeaderIcon},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},o.createElement("g",null,o.createElement("circle",{cx:"10",cy:"10",r:"8.5",fill:"none",stroke:"#949494",strokeWidth:"1"}),o.createElement("text",{textAnchor:"middle",x:"10",y:"14",fill:"#949494",fontWeight:"700",fontSize:"10"},e.index+1)))),H=e=>o.createElement("span",{className:B.steppedWizardHeaderIcon},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},o.createElement("g",null,o.createElement("circle",{cx:"10",cy:"10",r:"8.5",fill:"#0078d4"}),o.createElement("text",{textAnchor:"middle",x:"10",y:"14",fill:"white",fontWeight:"bold",fontSize:"10"},e.index+1)))),q=e=>!1!==e.visible&&o.createElement("div",{className:e.className??""},e.label?o.createElement("h3",{className:B.sectionLabel},e.label):null,e.description?o.createElement("div",{className:B.sectionDescription},e.description):null,e.children),_=e=>{const t=o.useCallback((()=>{r.openContextPane((0,D.getArmErrorsBladeReference)({errors:e.error}))}),[e.error]);return o.createElement(l.Link,{onClick:t,underline:!1},a.FormBuilder.Preflight.validationFailure,o.createElement(s.FontIcon,{className:B.statusBarForwardIcon,iconName:"Forward"}))},$=e=>{let t=a.FormBuilder.Footer.Feedback.Create.cesQuestion,r=a.FormBuilder.Footer.Feedback.Create.cvaQuestion;return o.useContext(X)||(t=a.FormBuilder.Footer.Feedback.NonCreate.cesQuestion,r=a.FormBuilder.Footer.Feedback.NonCreate.cvaQuestion),o.createElement("div",{className:B.feedbackLink},o.createElement(F.BladeLink,{openAsContextPane:!0,bladeReference:{bladeName:"InProductFeedbackBlade",extensionName:"HubsExtension",parameters:{bladeName:E.ReactView.getInstance().getViewName(),cesQuestion:e.cesQuestion??t,cvaQuestion:e.cvaQuestion??r,extensionName:(0,I.getEnvironmentValue)("extensionName"),featureName:e.featureName??"FormBuilder",surveyId:e.surveyId??"FormBuilder08052023"}}},o.createElement(s.Icon,{iconName:"Feedback",className:B.feedbackIcon}),a.FormBuilder.Footer.Feedback.linkName))},j=({deploymentOptions:e})=>{const t=O();return o.createElement(o.Fragment,null,o.createElement(l.Link,{onClick:t=>{r.openBlade({extensionName:"HubsExtension",bladeName:"TemplateViewerBlade",parameters:{options:{templateJson:e.templateJson,parameters:e.parameters}}})},className:B.automationLink,underline:!0},o.createElement(s.Icon,{className:t.iconStyles,iconName:"View"}),a.FormBuilder.Step.ReviewCreate.automationLink))},U=e=>{const{children:t,consolidatedValidation:r,forceTriggerOnAllSteps:n}=e,[a,i]=o.useState(!1),s=o.useMemo((()=>({consolidatedValidation:r,disablePrimaryAction:a,forceTriggerOnAllSteps:n,setDisablePrimaryAction:i})),[r,a,n]);return o.createElement(Z.Provider,{value:s},t)},W=e=>{const{children:t,forceTriggerValidation:r}=e,n=o.useCallback((()=>!0),[]),a=o.useMemo((()=>({isActive:n,registerStep:z,validationTriggerState:r})),[r,n]);return o.createElement(N.FormStepContext.Provider,{value:a},t)},K=e=>{const{children:t,forceTriggerValidation:r,selectedStepIndex:n,setStepContext:a,stepIndex:i}=e,s=o.useCallback((()=>n===i),[n,i]),l=o.useCallback((e=>{a((t=>Q(t,i,e)))}),[a,i]),c=o.useMemo((()=>({isActive:s,registerStep:l,validationTriggerState:r})),[r,s,l]);return o.createElement(N.FormStepContext.Provider,{value:c},t)},Q=(e,t,o)=>{const r=[...e];return r[t]=o,r},J=(0,L.createContext)(null,"PivotCreateContext"),X=(0,L.createContext)(null,"FormNavigationContext"),Z=(0,L.createContext)(null,"FormValidationContext"),Y=(0,L.createContext)({setStepsRenderState:z,setStepsHydrateState:z,setLazyStepsLoadState:z,registerStepDependencies:z,forceHydrate:z},"LazyStepSettersContext"),ee=(0,L.createContext)({stepsRenderState:{},lazyStepsLoadState:{},stepsHydrateState:{}},"LazyStepStateContext"),te=(0,g.createNode)("input").register.wrapper((e=>{const t=(0,v.withFormLabelAndValidation)(e);return({formLabelProps:e,validator:r,visible:n,props:a})=>{const i=o.useContext(N.FormStepContext),s=i?.validationTriggerState,l=(0,g.useCustomizationState)("validator"),c=(0,g.useTriggerCustomizer)("validator");o.useEffect((()=>{s&&c()}),[s]);const u=o.useCallback(((e,t)=>{a.onChange&&a.onChange(e,t)}),[a.onChange]);return(e=>{const[t,r]=o.useState(!1);o.useEffect((()=>{if(!t){const t=e.defaultValue??e.defaultChecked??e.defaultRating??void 0;if(void 0!==t)e.onChange(void 0,t),r(!0);else if(e.defaultSelectedKey&&e.options){const t=e.options.find((t=>t.key===e.defaultSelectedKey));e.onChange(void 0,t),r(!0)}}}),[e.defaultValue,e.defaultChecked,e.defaultRating,e.defaultSelectedKey,e.options?.length])})(a),!1!==n&&o.createElement(t,{...a,onChange:u,formLabelProps:{...e,forceTriggerValidation:s,validations:r,runningValidation:1===l,pendingValidation:0===l}})}}),["validator"],{validator:{deferredTime:500}}).seal(),oe=(0,g.createNode)("customInput").register.wrapper((e=>({visible:t=!0,props:r})=>t&&o.createElement(o.Fragment,null,o.createElement(e,{...r,onChange:(e,t)=>{r.onChange&&r.onChange(e,t)}})))).seal(),re=(0,g.createNode)("section").add.child(te).add.child(oe).register.wrapper((e=>({children:t,props:r,...n})=>o.createElement(q,{...n,className:`${n.className??""} ${A}`},o.createElement(e,{...r},t)))).register.defaultComponent((e=>o.createElement(o.Fragment,null,e.children))).seal(),ne=(0,g.createNode)("step").add.child(re).add.child(te).add.child(oe).register.wrapper((e=>({props:t,...r})=>{const n=(0,g.useId)().split(".")[1],a=o.useContext(N.FormStepContext),i=o.useContext(X),s=a?.isActive?.(),{setStepsRenderState:l,registerStepDependencies:c,forceHydrate:u}=o.useContext(Y),{stepsHydrateState:d}=o.useContext(ee),p=!!i&&!i.lazyRenderingDisabled,m=s||d[n],f=!p||m,b=!1!==r.visible;return o.useEffect((()=>{l((e=>({...e,[n]:"Awaiting"}))),c(n,r.stepDependencies)}),[]),o.useEffect((()=>{f&&l((e=>({...e,[n]:"Loaded"})))}),[f]),o.useEffect((()=>{a?.registerStep?.({label:r.label,visible:b})}),[b,r.label]),o.useEffect((()=>{s&&(!1!==r.visible&&r.onSelected?.(),u(n))}),[r.onSelected,s]),f?o.createElement("div",{"data-id":n,className:`${i?B.navigationStep:""} ${r.className??""}`},r.description?o.createElement("div",{className:B.sectionDescription},r.description):null,o.createElement(e,{...t},r.children)):o.createElement(o.Fragment,null)})).register.defaultComponent((e=>o.createElement(o.Fragment,null,e.children))).seal(),ae=(0,g.createNode)("footer").register.wrapper((e=>({props:t})=>o.createElement(f.Footer,null,o.createElement(e,{...t})))).seal(),ie=(0,g.createNode)("navigation").add.child(ne).add.child(ae,!0).register.wrapper((e=>({props:t,children:r})=>o.createElement(e,{...t},r))).register.defaultComponent((e=>o.createElement(o.Fragment,null,e.children))).seal();var se;!function(e){e[e.Subscription=0]="Subscription",e[e.ResourceGroup=1]="ResourceGroup"}(se||(t.TemplateDeploymentScope=se={}));t.useFormNavigation=()=>{const e=o.useContext(X);return null===e&&console.error("useFormNavigation called incorrectly. No context was provided."),{canMoveNext:e&&e.canMoveNext,navigationDisabled:e&&e.disableNavigation,moveLast:e&&e.pivotMode===me.Async?e.moveLast:z}};t.useFormValidation=()=>{const e=o.useContext(Z);return null===e&&console.error("useFormValidation called incorrectly. No context was provided."),{validationState:e&&e.consolidatedValidation,primaryActionDisabled:e&&e.disablePrimaryAction,validateAllSteps:e&&e.forceTriggerOnAllSteps}};t.useDeploymentOptions=()=>{const e=o.useContext(J);null===e&&console.error("useDeploymentOptions called incorrectly. No context was provided.");return{setDeploymentOptions:e&&e.setDeploymentOptions,setGetDeploymentOptionsAsync:e&&(t=>(e.setUsingGetDeploymentOptions(!0),e.setGetDeploymentOptions(t)))}};t.useFormTelemetry=()=>{const e=o.useContext(T.FormTelemetryContext);return null===e&&console.error("useFormTelemetry called incorrectly. No context was provided."),{logFormComplete:e&&e.logFormComplete}};const le=e=>{const t=o.useContext(T.FormTelemetryContext);t.initializeStepInfo(e);const[r,n]=o.useState({index:0,mapIndex:0}),[a,i]=o.useState([]),[s,l]=o.useState({}),[c,u]=o.useState({}),[d,p]=o.useState({}),m=o.useCallback((()=>{const e=(e,t)=>{let o=e;for(;o>=0&&o<a.length;){const e=a[o];if(e?.visible)return e.label;o+=t}return""};return{previous:e(r.index-1,-1),next:e(r.index+1,1)}}),[r,a]),g=o.useRef({totalStepCount:e.length,journey:[]}),f=o.useMemo((()=>e.reduce(((t,o,r)=>{const n=o.props.metadata.id,a=new Set(e.slice(0,r).map((e=>e.props.metadata.id)));return t[n]=a,t}),{})),[e]),b=(e,t)=>{t?.forEach((t=>{f[e].add(t)}))},v=e=>{u((t=>{const o={...t};return o[e]=!0,f[e].forEach((e=>{o[e]=!0})),o}))},y=o.useMemo((()=>({setLazyStepsLoadState:l,registerStepDependencies:b,forceHydrate:v,setStepsHydrateState:u,setStepsRenderState:p})),[]),S=o.useMemo((()=>({lazyStepsLoadState:s,stepsHydrateState:c,stepsRenderState:d})),[s,c,d]);return o.useEffect((()=>{if(a[r.index]?.label&&-1!==r.mapIndex){const e=new Date,o=g.current.journey[g.current.journey.length-1],n=t.steps[r.index].props.metadata.id;g.current={...g.current,currentStep:n,journey:o?[...g.current.journey.slice(0,-1),{...o,timeOnStep:e.getTime()-o.stepOpenedTime.getTime()},{stepIndex:r.index,visitOrder:g.current.journey.length,name:n,stepOpenedTime:e}]:[...g.current.journey,{stepIndex:r.index,visitOrder:g.current.journey.length,name:n,stepOpenedTime:e}]},t.logTabOpen(g.current);const i=t.stepVisits.get(n),s=void 0===i?1:i+1;t.stepVisits.set(n,s),t.logStepTelemetry(),t.setCurrentStep(r),N.FormStateExtractor.getInstance().registerStepState(a.map(((e,t)=>({tabName:e.label,isSelected:r.index===t}))))}}),[r,a[r.index]?.label]),{selectedStep:r,setSelectedStep:n,stepContext:a,getFooterAriaLabels:m,setStepContext:i,lazyStepSettersContext:y,lazyStateValuesContext:S}},ce=e=>{const t=o.useContext(T.FormTelemetryContext);(0,b.useAsync)(S.doesProvisioning,[],{disabled:!e,onSettled:e=>t.logProvisioningData(e.result?.telemetryId)})},ue=(e,t)=>{const r=o.useMemo((()=>e.reduce(((e,t,o)=>(t.visible&&e.push(o),e)),[])),[e]),n=o.useCallback((e=>({index:r[e],mapIndex:e})),[r]);return o.useEffect((()=>{t((e=>{let t=e.index;-1===e.mapIndex&&r.length&&(t=r[0]);const o=r.indexOf(t);return e.mapIndex!==o?{index:t,mapIndex:o}:e}))}),[r,t]),{indexMap:r,stepMetadataFromMapIndex:n}},de=(e,t,o)=>{Object.keys(e).forEach((r=>{let n=o[r];n||(((e,t)=>{const o={};e.forEach((e=>{const[t]=e.split("-");o[t]?o[t]++:o[t]=1})),e.forEach((e=>{const[r]=e.split("-");o[r]>1?t[e]=e:t[e]=r}))})(t,o),n=o[r]),n!==r&&(e[n]=e[r],delete e[r])}))},pe=e=>{const t=o.useRef(null),{trace:r}=(0,g.useDiagnostics)();return t.current||(t.current={aggregatedStepValidationData:{},compositeIds:new Set,compositeIdMapping:{},deploymentPreflightSuccessRate:{success:0,failure:0},startTime:Date.now(),selectedStep:{index:0,mapIndex:0},steps:[],stepVisits:new Map,terminalValidationState:{},formTelemetryId:(0,m.newGuid)(),initializeStepInfo:e=>{t.current.steps.length||0===e.length||(t.current.steps=e,t.current.currentStepName=t.current.steps[t.current.selectedStep.index].props.metadata.id,t.current.steps.forEach((e=>{const o=e.props.metadata.id;t.current.aggregatedStepValidationData[o]=[]})))},logTabOpen:e=>{r([{action:"TabOpened",data:{...e,formTelemetryId:t.current.formTelemetryId}}])},logFormComplete:()=>{r([{action:"FormCompleted",timestamp:Date.now(),data:{formTelemetryId:t.current.formTelemetryId}}])},logStepTelemetry:()=>{if(t.current.steps.length){const{currentStepName:e,compositeIds:o,compositeIdMapping:n}=t.current,a=t.current.stepVisits.get(e)-1,i=t.current.aggregatedStepValidationData[e][a];if(i){de(i.validationData,o,n);const e={totalSuccesses:0,totalFailures:0};Object.keys(i.validationData).forEach((t=>{e.totalSuccesses+=i.validationData[t].successes,e.totalFailures+=i.validationData[t].failures})),r([{action:"StepValidationInfo",timestamp:Date.now(),data:{...i,aggregatedValidationData:e,formTelemetryId:t.current.formTelemetryId}}])}}},logProvisioningData:e=>{r([{action:"ProvisioningData",actionModifier:e?"DoesProvisioningSucceeded":"DoesProvisioningFailed",data:{...e&&{provisioningTelemetryId:e},formTelemetryId:t.current.formTelemetryId}}])},logTerminalState:e=>{const{terminalValidationState:o,compositeIds:n,compositeIdMapping:a}=t.current;de(o,n,a),r([{action:"FormUnmounted",data:{timeSpentOnForm:e-t.current.startTime,stepIndexUnmounted:t.current.selectedStep.index,stepNameUnmounted:t.current.currentStepName,terminalValidationState:t.current.terminalValidationState,deploymentPreflightSuccessRate:t.current.deploymentPreflightSuccessRate,formTelemetryId:t.current.formTelemetryId}}])},registerCompositeIds:(e,o)=>{t.current.compositeIds.add(`${e}-${o}`)},setCurrentStep:e=>{t.current.selectedStep=e,t.current.currentStepName=t.current.steps[e.index].props.metadata.id},setStepValidationInfo:(e,o,r)=>{if(t.current.steps.length){const{currentStepName:n}=t.current,a=t.current.aggregatedStepValidationData[n],i=t.current.stepVisits.get(n),s=i-1;a[s]||(a[s]={stepName:n,visit:i,validationData:{}});const l=`${e}-${o}`;((e,t,o)=>{const r=e[t]||{successes:0,failures:0};2===o?r.successes++:3===o&&r.failures++,e[t]=r})(a[s].validationData,l,r)}},setTerminalValidationState:(e,o,r)=>{const n=`${e}-${o}`;t.current.terminalValidationState[n]=["Unset","Running","Success","Error"][r]}}),o.useEffect((()=>(r([{action:"FormOpened",timestamp:t.current.startTime,data:{formTelemetryId:t.current.formTelemetryId}}]),()=>{const e=Date.now();t.current.logStepTelemetry(),t.current.logTerminalState(e)})),[]),o.createElement(T.FormTelemetryContext.Provider,{value:t.current},e.children)};t.ReviewStep=e=>{const t=o.useContext(T.FormTelemetryContext),{isActive:r}=o.useContext(N.FormStepContext),{log:n,trace:i}=(0,g.useDiagnostics)(),s=r(),{setDisableNavigation:l}=o.useContext(X),{forceTriggerOnAllSteps:c,setDisablePrimaryAction:d,consolidatedValidation:p}=o.useContext(Z),{stepsRenderState:m,lazyStepsLoadState:f}=o.useContext(ee),{deploymentOptions:b,setDeploymentOptions:v,getDeploymentOptions:y,usingGetDeploymentOptions:x}=o.useContext(J),[h,C]=o.useState(!1),[D,I]=o.useState(null),[E,F]=o.useState(!0),L=o.useRef(!0),R=o.useMemo((()=>[...Object.values(m),...Object.values(f)].every((e=>"Awaiting"!==e))),[m,f]);o.useEffect((()=>{s?(C(!0),R&&c()):(h&&(0,w.dismissStatusBar)(),C(!1))}),[s,R]),o.useEffect((()=>{L.current=!1}),[b,y()]);const k=o.useCallback(((e,t)=>{e&&(d(!0),I(t),F(!1))}),[d,I,F]),P=o.useCallback((e=>{e&&(d(!1),I(null),F(!1))}),[d,I,F]),z=o.useCallback(((e,t)=>{e&&v(t)}),[v]);return o.useEffect((()=>{s&&(l(E),E||!D?(0,w.dismissStatusBar)():D&&(0,w.showStatusBar)(w.StatusBarType.Error,D))}),[l,s,D,E]),o.useEffect((()=>{let e=!0;if(s)if(F(!0),3===p)k(e,a.FormBuilder.Validations.failure);else if(2===p){const r=async()=>{try{let r;d(!0);try{r=x?await y()():b,z(e,r)}catch(t){return k(e,a.FormBuilder.Preflight.getDeploymentOptionsFailure),void n([{message:"useDeploymentOptionsFailed",args:[t],level:2}])}const s=await(0,S.doesProvisioning)();try{await s.validateTemplate(r),t.deploymentPreflightSuccessRate.success++,P(e)}catch(r){let n;t.deploymentPreflightSuccessRate.failure++;try{n=r&&(r.error??JSON.parse(r.message))}catch(e){n=r.message}k(e,n?o.createElement(_,{error:n}):a.FormBuilder.Preflight.failure),i([{action:"DeploymentValidation",data:{status:"Failed",errors:{error:r},formTelemetryId:t.formTelemetryId,telemetryId:s.telemetryId}}])}finally{e&&(L.current=!0)}}catch(t){k(e,a.FormBuilder.Preflight.failure),console.error("There was an issue with the configuration of this blade's provisioning. Please ensure your form is wrapped with `withProvisioning` when you export it and double check your deployment options. Error:",t),n([{message:"doesProvisioningFailed",args:[t],level:2}])}};b||x?L.current?D?k(e,D):P(e):r():P(e)}return()=>{e=!1}}),[p,s]),o.createElement(o.Fragment,null,E?o.createElement(u.Spinner,{label:a.FormBuilder.Validations.inProgress,labelPosition:"right",role:"alert",ariaLive:"assertive",styles:{root:{justifyContent:"flex-start"}}}):o.createElement(o.Fragment,null,3!==p&&b?o.createElement(j,{deploymentOptions:b}):null,o.createElement("div",{className:B.reviewSummary},e.children)))};t.ResourceScopeSection=e=>{const[t,r]=o.useState(),[i,s]=o.useState(),[l,c]=o.useState(),u=o.useCallback((t=>e.location?.allowedValues?t.filter((t=>e.location.allowedValues.includes(t.name))):t),[e.location?.allowedValues]),d=a.FormBuilder.ResourceScope.Subscription.label,p=n.ResourceGroupDropdown.title,m=e.location?.label??n.LocationsDropdown.label,f=e.location?.enableExtendedZones;if(o.useEffect((()=>{e.onChange?.(null,{resourceGroup:i,subscription:t,location:l});const o={[d]:"subscriptionId",[p]:"name",[m]:"name"};N.FormStateExtractor.getInstance().registerFormScopeState({deploymentScope:0===e.deploymentScope?"Subscription":"ResourceGroup",resourceTypes:e.resourceTypes,scopeId:i?.id?i.id:t?.subscriptionId,region:l?.name},o)}),[i,t,l]),o.useContext(N.FormStepContext)){const{validationTriggerState:n}=o.useContext(N.FormStepContext),i=(0,g.useCustomizationState)("subscriptionValidations"),l=(0,g.useTriggerCustomizer)("subscriptionValidations"),b=(0,g.useCustomizationState)("rgValidations"),v=(0,g.useTriggerCustomizer)("rgValidations"),y=(0,g.useCustomizationState)("locationValidations"),S=(0,g.useTriggerCustomizer)("locationValidations");return o.useEffect((()=>{n&&(l(),v(),S())}),[n]),o.createElement(o.Fragment,null,o.createElement(q,{label:a.FormBuilder.ResourceScope.Section.label,description:a.FormBuilder.ResourceScope.Section.description},o.createElement(R,{formLabelProps:{displayValue:d,tooltip:a.FormBuilder.ResourceScope.Subscription.tooltip,required:!0,forceTriggerValidation:n,validations:e.subscriptionValidations,runningValidation:1===i},onChange:(e,t)=>{r(t)}}),1!==e.deploymentScope?null:o.createElement(k,{formLabelProps:{displayValue:p,tooltip:a.FormBuilder.ResourceScope.ResourceGroup.tooltip,required:!0,nested:!0,forceTriggerValidation:n,validations:e.rgValidations,runningValidation:1===b},onChange:(e,t)=>{s(t)},subscriptionId:t?.subscriptionId,createNew:!0})),o.createElement(q,{label:a.FormBuilder.ResourceScope.Section.instanceLabel,className:B.instanceDetails},e.children,o.createElement(P,{formLabelProps:{displayValue:m,tooltip:e.location?.tooltip??a.FormBuilder.ResourceScope.Location.tooltip,required:!0,forceTriggerValidation:n,validations:e.locationValidations,runningValidation:1===y},onChange:(e,t)=>{c(t)},subscriptionId:t?.subscriptionId,resourceTypes:e.resourceTypes,customizeLocations:u,calloutProps:{directionalHintFixed:!0},enableEdgeLocations:f})))}return o.createElement(o.Fragment,null,o.createElement(q,{label:a.FormBuilder.ResourceScope.Section.label,description:a.FormBuilder.ResourceScope.Section.description},o.createElement(R,{formLabelProps:{displayValue:d,tooltip:a.FormBuilder.ResourceScope.Subscription.tooltip,required:!0,validations:e.subscriptionValidations},onChange:(e,t)=>{r(t)}}),1!==e.deploymentScope?null:o.createElement(k,{formLabelProps:{displayValue:p,tooltip:a.FormBuilder.ResourceScope.ResourceGroup.tooltip,required:!0,nested:!0,validations:e.rgValidations},onChange:(e,t)=>{s(t)},subscriptionId:t?.subscriptionId,createNew:!0})),o.createElement(q,{label:a.FormBuilder.ResourceScope.Section.instanceLabel,className:B.instanceDetails},e.children,o.createElement(P,{formLabelProps:{displayValue:m,tooltip:e.location?.tooltip??a.FormBuilder.ResourceScope.Location.tooltip,required:!0,validations:e.locationValidations},onChange:(e,t)=>{c(t)},subscriptionId:t?.subscriptionId,resourceTypes:e.resourceTypes,customizeLocations:u,calloutProps:{directionalHintFixed:!0}})))},t.FormSingleStepNavigation=o.memo((e=>{const t=o.Children.toArray(e.children).filter((e=>"step"===(0,g.getNodeType)(e)));if(t.length>1)throw"Not more than 1 step allowed for SingleStepNav.";le(t);const[r,n]=o.useState(!1),[a,i]=o.useState(null),s=o.useCallback((e=>{i(e)}),[i]),l=o.useCallback((()=>{n(!0)}),[]);return o.createElement(o.Fragment,null,o.createElement(U,{consolidatedValidation:a,forceTriggerOnAllSteps:l},o.createElement(v.ValidationAggregator,{forceTriggerValidation:r,onChange:s},o.Children.map(e.children,(e=>o.createElement(W,{forceTriggerValidation:r},e))))))})),t.FormAsyncNavigation=o.memo((e=>{const t=O(),r=o.Children.toArray(e.children),n=r.filter((e=>"step"===(0,g.getNodeType)(e))),i=r.filter((e=>"footer"===(0,g.getNodeType)(e))),[l,u]=o.useState(!1),[d,p]=o.useState(!1),[m,f]=o.useState(null),b=o.useRef(null),y=o.useCallback((()=>b.current),[]),S=o.useCallback((e=>{b.current=e}),[b]),x=o.useRef(!1),w=o.useCallback((e=>{x.current=e}),[x]);ce(!(!m&&!x.current));const h=o.useRef(e.disableLazyLoading??!1),C=le(n),{indexMap:D,stepMetadataFromMapIndex:I}=ue(C.stepContext,C.setSelectedStep),[E,F]=o.useState(null),L=o.useCallback((e=>{F(e)}),[F]),T=o.useCallback((()=>{u(!0)}),[]);return o.createElement(U,{consolidatedValidation:E,forceTriggerOnAllSteps:T},o.createElement(X.Provider,{value:{pivotMode:me.Async,moveNext:()=>C.setSelectedStep((e=>I(e.mapIndex+1))),movePrevious:()=>C.setSelectedStep((e=>I(e.mapIndex-1))),moveLast:()=>C.setSelectedStep(I(D.length-1)),canMovePrevious:()=>C.selectedStep.mapIndex>0,canMoveNext:()=>C.selectedStep.mapIndex<D.length-1,disableNavigation:d,setDisableNavigation:p,lazyRenderingDisabled:h.current,getFooterAriaLabels:C.getFooterAriaLabels}},o.createElement(Y.Provider,{value:C.lazyStepSettersContext},o.createElement(ee.Provider,{value:C.lazyStateValuesContext},o.createElement(J.Provider,{value:{deploymentOptions:m,setDeploymentOptions:f,getDeploymentOptions:y,setGetDeploymentOptions:S,usingGetDeploymentOptions:x.current,setUsingGetDeploymentOptions:w}},o.createElement(v.ValidationAggregator,{onChange:L},o.createElement(c.Pivot,{onLinkClick:e=>{const t=parseInt(e.props.itemKey);C.setSelectedStep({index:t,mapIndex:D.indexOf(t)})},className:B.pivotToolbar,overflowBehavior:"menu",overflowAriaLabel:a.FormBuilder.Step.Pivot.overflow,styles:{linkIsSelected:G,itemContainer:B.pivotItemContainer},selectedKey:C.selectedStep.index.toString()},o.Children.map(n,((e,r)=>{const[n,a]=o.useState(null),i=o.useCallback((e=>{a(3===e?o.createElement(s.FontIcon,{iconName:"StatusErrorFull",className:t.stepValidationIconTabs}):o.createElement(o.Fragment,null))}),[a]);o.useEffect((()=>{if(r===C.selectedStep.index){const e=document.querySelectorAll('[role="tab"]')[r];e&&e.focus()}}),[r,C.selectedStep.index]);const u=C.stepContext[r]?.visible??!0,p={display:"none"};return o.createElement(c.PivotItem,{style:u?void 0:p,itemKey:r.toString(),alwaysRender:!0,headerButtonProps:{disabled:d,style:u?d?{color:"grey"}:void 0:p},headerText:C.stepContext[r]?.label??"",onRenderItemLink:(e,r)=>o.createElement("span",{className:t.hoverStyle},n,r(e))},o.createElement(K,{forceTriggerValidation:l,selectedStepIndex:C.selectedStep.index,setStepContext:C.setStepContext,stepIndex:r},o.createElement(v.ValidationAggregator,{forceTriggerValidation:l,onChange:i},e)))})))),i)))))})),t.FormWizardNavigation=o.memo((e=>{const t=O(),r=o.Children.toArray(e.children),n=r.filter((e=>"step"===(0,g.getNodeType)(e))),i=r.filter((e=>"footer"===(0,g.getNodeType)(e))),[l,u]=o.useState([]),[d,p]=o.useState([]),[m,f]=o.useState(!1),[b,y]=o.useState(null),[S,x]=o.useState(!1),w=o.useRef(),h=o.useCallback((()=>w.current),[]),C=o.useCallback((e=>{w.current=e}),[w]),D=o.useRef(!1),I=o.useCallback((e=>{D.current=e}),[D]);ce(!(!b&&!D.current));const E=o.useRef(e.disableLazyLoading??!1),F=le(n),{indexMap:L,stepMetadataFromMapIndex:T}=ue(F.stepContext,F.setSelectedStep),{lazyStateValuesContext:N,lazyStepSettersContext:R}=F,k=n[F.selectedStep.index]?.props?.metadata?.id,P=!1===N.stepsHydrateState[k]||void 0!==N.lazyStepsLoadState[k]&&"Loaded"!==N.lazyStepsLoadState[k];return o.useEffect((()=>{S&&(F.selectedStep.mapIndex<L.length-1&&2===d[F.selectedStep.index]&&F.setSelectedStep((e=>T(e.mapIndex+1))),2!==d[F.selectedStep.index]&&3!==d[F.selectedStep.index]||x(!1))}),[d[F.selectedStep.index],S]),o.useEffect((()=>{f(P)}),[P]),o.createElement(U,{consolidatedValidation:d[F.selectedStep.index],forceTriggerOnAllSteps:z},o.createElement(X.Provider,{value:{pivotMode:me.Wizard,moveNext:()=>{u((e=>Q(e,F.selectedStep.index,!0))),x(!0)},movePrevious:()=>F.setSelectedStep((e=>T(e.mapIndex-1))),canMovePrevious:()=>F.selectedStep.mapIndex>0,canMoveNext:()=>F.selectedStep.mapIndex<L.length-1,disableNavigation:m,setDisableNavigation:f,lazyRenderingDisabled:E.current,getFooterAriaLabels:F.getFooterAriaLabels}},o.createElement(Y.Provider,{value:R},o.createElement(ee.Provider,{value:N},o.createElement(J.Provider,{value:{deploymentOptions:b,setDeploymentOptions:y,getDeploymentOptions:h,setGetDeploymentOptions:C,usingGetDeploymentOptions:D.current,setUsingGetDeploymentOptions:I}},o.createElement(c.Pivot,{onLinkClick:e=>{const t=parseInt(e.props.itemKey);t<F.selectedStep.index&&F.setSelectedStep({index:t,mapIndex:L.indexOf(t)})},overflowBehavior:"menu",overflowAriaLabel:a.FormBuilder.Step.Pivot.overflow,styles:{linkIsSelected:G,itemContainer:B.pivotItemContainer},selectedKey:F.selectedStep.index.toString()},o.Children.map(n,((e,r)=>{const n=F.stepContext[r]?.visible??!0,a={display:"none"},i=o.useCallback((e=>{p((t=>Q(t,r,e)))}),[p]);return o.useEffect((()=>{if(r===F.selectedStep.index){const e=document.querySelectorAll('[role="tab"]')[r];e&&e.focus()}}),[r,F.selectedStep.index]),o.createElement(c.PivotItem,{style:n?void 0:a,itemKey:r.toString(),alwaysRender:!0,headerText:F.stepContext[r]?.label??"",headerButtonProps:r<=F.selectedStep.index?{style:n?void 0:a}:{disabled:!0,style:n?{color:"grey"}:a},onRenderItemLink:(e,n)=>{const a=d[r],i=o.createElement(s.FontIcon,{iconName:"SkypeCircleCheck",className:t.stepValidationIconSuccess}),l=o.createElement(s.FontIcon,{iconName:"StatusErrorFull",className:t.stepValidationIconError}),c=o.createElement(H,{index:L.indexOf(r)});return o.createElement("span",{className:r===F.selectedStep.index?t.hoverStyle:void 0},r===F.selectedStep.index?P?c:3===a?l:2===a?i:c:r<F.selectedStep.index?i:o.createElement(M,{index:L.indexOf(r)}),n(e))}},o.createElement(K,{forceTriggerValidation:l[r]??!1,selectedStepIndex:F.selectedStep.index,setStepContext:F.setStepContext,stepIndex:r},o.createElement(v.ValidationAggregator,{forceTriggerValidation:l[r],onChange:i},e)))}))),i)))))}));t.FormNavigationFooter=e=>{const t=o.useContext(X),r=t.disableNavigation||!t.canMoveNext(),{previous:n,next:s}=t.getFooterAriaLabels(),l=s?a.FormBuilder.Footer.Button.nextAriaLabelWithStepName.replace("{0}",s):a.FormBuilder.Footer.Button.nextAriaLabel,c=n?a.FormBuilder.Footer.Button.prevAriaLabelWithStepName.replace("{0}",n):a.FormBuilder.Footer.Button.prevAriaLabel;return o.createElement("div",{className:B.footer},o.createElement(i.DefaultButton,{className:B.footerButton,text:a.FormBuilder.Footer.Button.prev,ariaLabel:c,disabled:t.disableNavigation||!t.canMovePrevious(),onClick:()=>t.movePrevious()}),t.pivotMode===me.Async?o.createElement(i.DefaultButton,{className:B.footerButton,ariaLabel:l,text:a.FormBuilder.Footer.Button.next,disabled:r,onClick:()=>t.moveNext()}):t.canMoveNext()?o.createElement(i.PrimaryButton,{className:B.footerButton,ariaLabel:l,text:a.FormBuilder.Footer.Button.next,disabled:t.disableNavigation,onClick:()=>t.moveNext()}):null,e.postFixElements,e.feedbackProps?.show&&o.createElement($,{...e.feedbackProps}))};t.SingleStepFooter=e=>{const{validationState:r,primaryActionDisabled:n,validateAllSteps:s}=(0,t.useFormValidation)(),{logFormComplete:l}=o.useContext(T.FormTelemetryContext),[c,u]=o.useState(!1);return o.useEffect((()=>{c&&2===r?(e.submitButtonProps.onClick(),u(!1)):3===r&&u(!1)}),[r,c]),o.createElement(o.Fragment,null,o.createElement(i.PrimaryButton,{className:B.footerButton,text:e.submitButtonProps.text??a.FormBuilder.Footer.Button.ok,disabled:0!==r&&2!==r||n||e.submitButtonProps.disabled,onClick:()=>{u(!0),l(),0===r&&s()}}),!0===e.cancelButtonProps.hide?o.createElement(o.Fragment,null):o.createElement(i.DefaultButton,{className:B.footerButton,text:e.cancelButtonProps.text??a.FormBuilder.Footer.Button.cancel,onClick:e.cancelButtonProps.onClick}),!e.feedbackProps?.hide&&o.createElement($,{...e.feedbackProps}))};var me;t.CreateFooter=e=>{const{logFormComplete:r}=o.useContext(T.FormTelemetryContext),n=o.useContext(J),s=o.useContext(X),l=o.useContext(Z);return o.useEffect((()=>{n.setDeploymentOptions(e.deploymentOptions)}),[e.deploymentOptions]),o.useEffect((()=>{e.getDeploymentOptions&&(n.setGetDeploymentOptions(e.getDeploymentOptions),n.setUsingGetDeploymentOptions(!0))}),[e.getDeploymentOptions]),o.createElement(t.FormNavigationFooter,{postFixElements:o.createElement(o.Fragment,null,s.canMoveNext()?s.pivotMode===me.Async?o.createElement(i.PrimaryButton,{className:B.footerButton,text:a.FormBuilder.Footer.Button.reviewCreate,onClick:()=>{s.moveLast()}}):null:o.createElement(i.PrimaryButton,{className:B.footerButton,text:a.FormBuilder.Footer.Button.create,disabled:s.disableNavigation||2!==l.consolidatedValidation||l.disablePrimaryAction,onClick:()=>(r(),s.setDisableNavigation(!0),(0,S.doesProvisioning)().then((t=>(e.beforeProvision?.(),t.deployTemplate(n.deploymentOptions)))))}),!e.feedbackProps?.hide&&o.createElement($,{...e.feedbackProps}))})},t.formBuilder=(0,g.createNode)("form").add.child(ie,!0).register.wrapper((()=>e=>o.createElement(o.Fragment,null,o.createElement(C.ControlPlanePolicyScopeContext.Provider,{value:e.controlPlanePolicyScope},o.createElement(pe,null,e.children))))).toBuilder(),function(e){e[e.Wizard=0]="Wizard",e[e.Async=1]="Async"}(me||(me={}))}));