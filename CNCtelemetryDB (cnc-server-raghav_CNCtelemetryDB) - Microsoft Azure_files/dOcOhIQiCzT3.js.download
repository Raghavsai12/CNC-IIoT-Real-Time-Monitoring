define("_generated/Less/MsPortalImpl.Controls/Controls/Forms/CopyableLabel.css",["module"],(function(e){"use strict";return{css:".fxc-copyablelabel{overflow:hidden;padding-right:28px;background-color:transparent}.fxc-copyablelabel .fxc-copyablelabel-textbox{box-sizing:border-box;float:left;width:100%}.fxc-copyablelabel .fxc-copyablelabel-textbox .azc-input{text-overflow:ellipsis}.fxc-copyablelabel .fxc-copyablelabel-textbox .azc-dockedballoon.azc-dockedballoon-validation{box-sizing:border-box}.fxc-copyablelabel .fxc-copyablelabel-alignbutton{float:none!important}.fxc-copyablelabel .fxc-copyablelabel-hideTextbox{display:none!important}.fxc-copyablelabel .fxc-copyablelabel-copybutton{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;overflow:hidden;display:table;border-width:0;margin-right:-28px;float:right;padding:0;outline-width:0}.fxc-copyablelabel .fxc-copyablelabel-copybutton.azc-button{min-width:0}.fxc-copyablelabel .fxc-copyablelabel-copybutton.azc-button .fxc-copyablelabel-copyimage{vertical-align:middle;text-align:center;display:table-cell;padding:3px;width:23px;height:23px;box-sizing:border-box;display:inline-block}.fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-anchor{position:absolute;height:0;width:50%;top:20%;left:25%}.fxc-copyablelabel .fxc-copyablelabel-copybutton .azc-dockedballoon.azc-dockedballoon-validation .azc-dockedballoon-anchor{visibility:hidden}.fxc-copyablelabel .fxc-copyablelabel-copybutton .azc-dockedballoon.azc-dockedballoon-validation .azc-dockedballoon-anchor::before{color:transparent}.fxc-copyablelabel .fxc-copyablelabel-copybutton .fxs-button-default{border-width:1px}.fxc-copyablelabel-temp-element{position:absolute;left:-10000px;top:-10000px;background-color:#fff;color:#000}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel-textbox .azc-input{padding-right:25px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel-textbox .azc-textarea{overflow:hidden}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel{padding-right:0}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton{border:1px solid transparent;background-color:transparent;margin:-22px 2px 0 0;padding:0 4px;height:20px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton:focus{background-color:inherit}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-copyimage{width:12px!important;height:12px!important;padding:0!important;margin-top:-7px}.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton.fxs-inner-solid-border:focus::after{display:none}.fxc-summary-item-summary>.azc-fabric.msportalfx-form-formelement .fxc-copyablelabel .fxc-copyablelabel-copybutton .fxc-copyablelabel-copyimage{margin-top:-7px}.fxs-highcontrast-dark .fxc-copyablelabel-copyimage .msportalfx-svg-palette-inherit{fill:white!important}.fxs-highcontrast-dark .fxs-copyfield .fxc-copyablelabel-copybutton:focus .fxc-copyablelabel-copyimage{fill:black}.fxs-highcontrast-light .fxc-copyablelabel-copyimage .msportalfx-svg-palette-inherit{fill:black!important}.fxs-highcontrast-light .fxs-copyfield .fxc-copyablelabel-copybutton:focus .fxc-copyablelabel-copyimage{fill:white}",moduleId:e.id}})),
define("MsPortalImpl.Controls/Controls/Forms/CopyableLabel",["require","exports","MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget","MsPortalImpl.Controls/Controls/Base/Loadable","MsPortalImpl.Controls/Controls/DockedBalloon","FxInternal/Controls/InfoBalloon","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Forms/Viva.MultiLineTextBox","Viva.Controls/Controls/Forms/Viva.Button","MsPortalImpl/Interactions/Interactions.PortalReader","FxInternal/Css","_generated/Less/MsPortalImpl.Controls/Controls/Forms/CopyableLabel.css","MsPortalImpl/Base/Base.BrowserDetection","SharedUtilities/ClipboardUtils"],(function(e,l,o,t,a,i,c,n,s,r,b,d,p,f,x){"use strict";l.Widget=void 0;var m=MsPortalFx.Base,y=m.Diagnostics.Telemetry.Context;(0,d.injectCss)(p);var h=MsPortalFx.getUniqueId;const u=c.Viva.CopyableLabel,g=u.Clipboard,C=g.hover,v="fxs-hide-accessible-label";function k(e){const l=new i.ViewModel(e);return l.type=i.Type.Validation,l}class w extends t.Widget{constructor(e,l,t){super(e,l,t),this._announce=new b.PortalReader(this.ltm,{idPrefix:"cplbl"}),this._showClickedTooltip=()=>null;const i=new r.ViewModel({ltm:this.ltm}),c=g.clicked,d=`fxc-copyablelabel-${h()}`,p=`fxc-copyablelabel-${h()}`;let w;const I=this.vmBasicOption,B=this.options._msPortalFxRows;B>1?(w=new s.ViewModel(I),w.rows(B)):w=new n.ViewModel(I),w.populateFromObject(this.options),w.disabled=ko.observable(!1),w.cssClass=null,e.addClass("msportalfx-form-formelement"),e.toggleClass("azc-fabric",!l.hideTextbox&&function(e){return!e.hasOwnProperty("hideValidationCheck")}(l));const _=new o.LabelAndBalloonWidgetHelper(this._diContainer,this.ltm,l);_.appendWidgetToDom(e,$(FxImpl.createElement("div",{class:"azc-formElementContainer"},FxImpl.createElement("div",{class:"fxc-copyablelabel"},FxImpl.createElement("div",{class:"fxc-copyablelabel-textbox"}))))),_.attachSubLabelClass(e),_.attachKeyboardEvents(e);const z=this.element.find(".azc-formElementContainer");_.insertLabelBefore(z),_.insertSubLabelAfter(z);const F=this.element.find(".fxc-copyablelabel"),P=F.find(".fxc-copyablelabel-textbox");let M;if(B>1){const e=new s.Widget(P,w);this._widgets.push(e),M=P.find("textarea:first").attr({"aria-multiline":!0}),M.focusin((function(){$(this).select()}))}else this._widgets.push(new n.Widget(P,w)),M=P.find("input:first");const V=l.readOnly&&l.readOnly(),L=this.$disabled&&this.$disabled();M.attr({"aria-readonly":!(!V&&!L),"aria-describedby":d}),ko.computed(this.ltm,[l.label,l.ariaLabel],((e,l)=>{M.attr("aria-label",l||(e||null))})),F.append(FxImpl.createElement("div",{class:"fxc-copyablelabel-copybutton","aria-labelledby":p},FxImpl.createElement("div",{class:"fxc-copyablelabel-clicked fxc-copyablelabel-anchor"}),FxImpl.createElement("div",{class:"fxc-copyablelabel-hover fxc-copyablelabel-anchor"}),FxImpl.createElement("div",{class:"fxc-copyablelabel-copyimage","data-bind":"image: $data.copyIcon"})),FxImpl.createElement("div",{class:v,id:d,"aria-hidden":"true"},MsPortalFx.encodeAttribute(f.isMac?u.macDescribedBy:u.describedBy)),FxImpl.createElement("div",{class:v,id:p,"aria-hidden":"true"},MsPortalFx.encodeAttribute(C))),this._bindDescendants({copyIcon:MsPortalFx.Base.Images.Copy({palette:99})},F.find(".fxc-copyablelabel-copybutton"));const T=F.find(`#${p}`)[0];ko.reactor(this.ltm,[l.ariaLabel,l.label],((e,l)=>{const o=e||l;T.textContent=o?g.name.format(o):C}));const E=F.find(">div.fxc-copyablelabel-copybutton"),D=E.find(">div.fxc-copyablelabel-hover"),W=E.find(">div.fxc-copyablelabel-clicked"),O=k(this.ltm);O.content(C),O.stopClickPropagation(!1),O.disabled(!0);const R=k(this.ltm);R.stopClickPropagation(!1),R.disabled(!0),l.hideTextbox&&(P.addClass("fxc-copyablelabel-hideTextbox"),E.addClass("fxc-copyablelabel-alignbutton"));const S=()=>{this._dockedBalloonHoverControl||(this._dockedBalloonHoverControl=new a.Widget(D,O,{},new a.WidgetUIState({diContainer:this._diContainer,vm:O}))),O.balloonVisible(!0)},A=()=>{[this._dockedBalloonHoverControl,this._dockedBalloonClickedControl].every((e=>{const l=e?._widgets||null;l?.every((e=>{e?._mouseLeave()}))}))};E.hover(S,A),E.focusin(S),E.focusout(A),this.ltm.registerForDispose([E.setEvents(["keydown",e=>{112===e.which?(_.toggleBalloon(),e.preventDefault()):27===e.which&&(O.balloonVisible(!1),R.balloonVisible(!1)),e.stopPropagation()}])]),i.isDefault(!0),i.disabled(!1),i.click=async(e,o)=>{let t;this.element.trigger("fxcopybuttonclick"),function(e,l){if(l){const o=y.getBladeContext(),t={bladeId:o?.id,bladeInstanceId:o?.instanceId};m.Diagnostics.Telemetry.trace({source:"CopyableLabel",action:e,name:l,data:t})}}("ControlClicked",ko.unwrap(l.telemetryName)),t=B>1?w.value():w.value()&&w.value().toString().replace(/\r?\n|\r/g,""),await x.writeToClipboard(t);const i=c;return R.content(i),this._announce.read(i),this._dockedBalloonClickedControl||(this._dockedBalloonClickedControl=new a.Widget(W,R,{},new a.WidgetUIState({diContainer:this._diContainer,vm:R}))),this._showClickedTooltip()||(this._showClickedTooltip=()=>(O.balloonVisible(!1),O.disabled(!0),R.disabled(!1),R.balloonVisible(!0),this._dockedBalloonClickedControl._widgets.every((e=>{(e||{})._balloonPinned=!1})),!0),this._showClickedTooltip()),!1};const H=new r.Widget(E,i);this._widgets.push(H),ko.computed(this.ltm,[l.readOnly,this.$disabled],((e,l)=>{const o=!(!e&&!l);F.toggleClass("fxc-copyablelabel-disabled",o),M&&(M.toggleClass("azc-bg-light",o),M.prop({readonly:o,tabindex:o?-1:0}),M.attr("aria-readonly",o))})),l.hideTextbox&&1===l.style&&(E.removeClass("fxs-portal-button-primary"),E.addClass("fxs-button-default")),l.value.subscribeAndRun(this.ltm,(e=>{M.attr("title",e)})),M.keydown((e=>{if(112===e.which)return _.toggleBalloon(),!1;27===e.which&&_.toggleBalloon(!1)}))}dispose(){this._checkExistsOrRegisterDestroyId(super.dispose)||(MsPortalFx.disposeDisposable(this._dockedBalloonClickedControl),MsPortalFx.disposeDisposable(this._dockedBalloonHoverControl),super.dispose(),this._cleanElement())}}l.Widget=w}));