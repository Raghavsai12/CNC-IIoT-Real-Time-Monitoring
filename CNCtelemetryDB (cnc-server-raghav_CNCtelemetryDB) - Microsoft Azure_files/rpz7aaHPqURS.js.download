define("@microsoft/azureportal-reactview/FilterableDropdown",["require","exports","react","react","@fluentui/react/lib/Dropdown","FxInternal/Resources/ReactComponents","@fluentui/react/lib/SelectableOption","@fluentui/react/lib/TextField","@microsoft/azureportal-reactview/internal/ErrorBoundary","@microsoft/azureportal-reactview/FormLabel","@fluentui/react/lib/Announced","@fluentui/react/lib/Utilities","@microsoft/azureportal-reactview/internal/AsyncHooks"],(function(e,t,o,r,l,n,i,a,s,p,c,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterableDropdown=void 0;const m="FilterableDropdown::FilterText",b="FilterableDropdown::Divider",y="FilterableDropdown::NoOptionsLabel",h={calloutMaxHeight:500};function w(e,t){return e.text.toLocaleLowerCase().includes(t)}t.FilterableDropdown=(0,s.withErrorBoundary)(o.memo((e=>{const{options:t,filterDebounceTime:s=100,onRenderLabel:D,optionsFilter:f,optionFilter:T=w,selectAllOptionKey:x}=e,[I,M]=(0,r.useState)(""),{ariaLabelledBy:F,ariaRequired:O,setIsTooltipIconTabbable:k}=(0,p.useFormLabelContext)(!0),v=(0,d.useDebounce)(((e,t)=>{M(t)}),s),g=(0,r.useMemo)((()=>{if(!I)return t;const e=(e,t)=>function(e,t,o){const r=[],l=t.toLocaleLowerCase();let n={hasMatch:!1};for(const a of e)a.itemType===i.SelectableOptionMenuItemType.Divider?n.hasMatch&&r.push(a):a.itemType===i.SelectableOptionMenuItemType.Header?n={header:a,hasMatch:!1}:o(a,l,t)&&(n.header&&!n.hasMatch&&(r.push(n.header),n.hasMatch=!0),r.push(a));return r}(e,t,T);return f?f(t,I,e):e(t,I)}),[t,I,f,T]),S=(0,r.useMemo)((()=>g.filter((e=>e.itemType!==i.SelectableOptionMenuItemType.Divider&&e.itemType!==i.SelectableOptionMenuItemType.Header&&!e.hidden))),[g]),L=S.length,E=(0,r.useMemo)((()=>{const t=[{key:m,text:""},{key:b,text:"",itemType:i.SelectableOptionMenuItemType.Divider}];return e.multiSelect&&x&&t.push({key:x,text:n.Dropdown.selectAll,hidden:!!I}),g.length?t.push(...g):t.push({key:y,text:""}),t}),[I,g,x]),R=(0,r.useMemo)((()=>{let e;return e=L>1?(0,u.format)(n.Dropdown.multipleOption,L):1===L?n.Dropdown.oneOption:n.Dropdown.noOption,e}),[L]);(0,r.useEffect)((()=>{k(e.disabled)}),[e.disabled]);const C=o.useCallback(((t,r)=>{const l=()=>e.onRenderItem?e.onRenderItem(t,r):r(t);return t.key===m?o.createElement(a.TextField,{onChange:v,styles:{root:{margin:"10px 16px 5px"}},key:"Filter",placeholder:n.Dropdown.filterItems}):t.key===y?o.createElement("p",{key:"noOptions",style:{textAlign:"center",margin:"5px"}},n.Dropdown.noOption):t.key===b?r(t):t.itemType===i.SelectableOptionMenuItemType.Divider||t.itemType===i.SelectableOptionMenuItemType.Header?l():o.cloneElement(l(),{"aria-setsize":S.length,"aria-posinset":S.findIndex((e=>e.key===t.key))+1})}),[e.onRenderItem,S]),A=o.useCallback(((e,t)=>e.label||D||I?o.createElement(o.Fragment,null,D?D(e,t):t(e),I&&o.createElement(c.Announced,{message:R,"aria-live":"assertive"})):null),[R,I,e.label,e.onRenderLabel]),z=o.useCallback((()=>{M(""),e.onDismiss?.()}),[M,e.onDismiss]);return o.createElement(l.Dropdown,{...e,"aria-labelledby":e["aria-labelledby"]??F,"aria-required":e["aria-required"]??O,onRenderLabel:A,onRenderItem:C,onDismiss:z,options:E,selectedKey:I&&!e.multiSelect?null:e.selectedKey,placeholder:e.placeholder||n.Dropdown.selectExistingItem,styles:e.styles??{dropdownItem:{height:"auto"},dropdownOptionText:{overflow:"visible",whiteSpace:"normal"}},calloutProps:{...h,...e.calloutProps}})})),"FilterableDropdown")}));