define("MsPortalImpl/Widgets/AzHome/AzHomeConstants",["require","exports"],(function(e,r){"use strict";r.TogglingConstants=r.TelemetrySourceConstants=r.TelemetryNameConstants=r.TelemetryActionConstants=r.ResourcesConstants=r.RecentResourcesConstants=r.FeedbackConstants=r.FavoriteResourcesConstants=r.AzHomeConstants=r.AlertsDataSourceConstants=r.AlertsConstants=void 0;r.TogglingConstants={ShowAzHomeFRE:"showAzHomeFRE"},r.AlertsConstants={ServiceIssue:"ServiceIssue",PlannedMaintenance:"PlannedMaintenance",HealthAdvisory:"HealthAdvisory",SecurityAdvisory:"SecurityAdvisory",Sev0:"Sev0",Sev1:"Sev1",Sev2:"Sev2",Sev3:"Sev3",ViewResourceAlertsLink:"#view/Microsoft_Azure_Monitoring/AzureMonitoringBrowseBlade/~/alertsV2",Sev0AlertsLink:"#view/Microsoft_Azure_Monitoring_Alerts/AlertsSummaryBlade/severity~/%5B%22Sev0%22%5D",Sev1AlertsLink:"#view/Microsoft_Azure_Monitoring_Alerts/AlertsSummaryBlade/severity~/%5B%22Sev1%22%5D",Sev2AlertsLink:"#view/Microsoft_Azure_Monitoring_Alerts/AlertsSummaryBlade/severity~/%5B%22Sev2%22%5D",Sev3AlertsLink:"#view/Microsoft_Azure_Monitoring_Alerts/AlertsSummaryBlade/severity~/%5B%22Sev3%22%5D",ViewServiceHealthLink:"#view/Microsoft_Azure_Health/AzureHealthBrowseBlade/~/serviceIssues",MaintenanceLink:"#view/Microsoft_Azure_Health/AzureHealthBrowseBlade/~/plannedMaintenance",HealthAdvisoryLink:"#view/Microsoft_Azure_Health/AzureHealthBrowseBlade/~/otherAnnouncements",SecurityLink:"#view/Microsoft_Azure_Health/AzureHealthBrowseBlade/~/securityAnnouncements",CreateAlertRuleLink:"#view/Microsoft_Azure_Monitoring/CreateAlertRuleBlade/scopes~/%5B%5D/signals~/%5B%5D"},r.AlertsDataSourceConstants={EventType:"eventType",Severity:"severity",Count:"count_",DCountTrackingId:"dcount_trackingId",GetServiceHealthAlerts:"getServiceHealthAlerts",GetResourceAlerts:"getResourceAlerts",AzHomeAlertsDataSource:"AzHomeAlerts.DataSource",GetAlertsByResourceIds:"getAlertsByResourceIds",TargetResourceId:"targetResourceId",AlertsCount:"alertsCount",MaxResourcesToShow:6,GetAlertRulesCount:"getAlertRulesCount",MaxAlertRulesCountRows:1},r.ResourcesConstants={CreateResourceLink:"#create/hub",StartProjectLink:"#view/Microsoft_Azure_Resources/QuickstartCenterMenuBlade/~/popularServicesTab",ConnectWorkloadsLink:"#view/Microsoft_Azure_ArcCenterUX/ArcCenterInfrastructure.ReactView",MigrateInfrastructureLink:"#view/Microsoft_Azure_Migrate/AmhResourceMenuBlade/~/getStarted",AlertsMenuId:"alerts"},r.RecentResourcesConstants={ViewAllResourcesLink:"#view/HubsExtension/BrowseAll",ViewAllRecentResourcesLink:"#view/Microsoft_Azure_Resources/ResourceManagerBlade/~/recents"},r.FavoriteResourcesConstants={ViewAllFavoritesLink:"#view/Microsoft_Azure_Resources/ResourceManagerBlade/~/favorites",FavoritesLimit:6},r.FeedbackConstants={AzHomeFeedback:"AzHomeFeedback",SurveyId:"AzHomeFeedback012025",BladeName:"AzHome",ExtensionName:"Shell"},r.TelemetryNameConstants={AzHomeDay0:"AzHomeDay0",AzHomeDay1:"AzHomeDay1",AzHomeDay7:"AzHomeDay7",AzHomeDay100:"AzHomeDay100"},r.TelemetrySourceConstants={AzHomeDay1Resources:"AzHomeDay1Resources",AzHomeDay100Resources:"AzHomeDay100Resources",AzHomeFeedback:"AzHomeFeedback",AzHomeFRE:"AzHomeFRE",AzHomeToggle:"AzHomeToggle",RenderHomeWithToggle:"RenderHomeWithToggle",AzureHomeDataSource:"AzureHomeDataSource",AzHomeAlerts:"AzHomeAlerts",AzHomeServiceHealth:"AzHomeServiceHealth",CreateResourceSplitButton:"CreateResourceSplitButton",AzHomeRecentlyUsedTable:"AzHomeRecentlyUsedTable",AzHomeFavoritesTable:"AzHomeFavoritesTable",NewSideBar:"NewSideBar"},r.TelemetryActionConstants={AzHomeToggleClick:"AzHomeToggleClick",Day1ResourceClick:"Day1ResourceClick",Day1ResourceInfoBalloonClick:"Day1ResourcesInfoBalloonClick",Day1FeedbackClick:"Day1FeedbackClick",Day100FeedbackClick:"Day100FeedbackClick",AzHomeRenderFromSettings:"AzHomeRenderFromSettings",ReactHomeWithToggle:"ReactHomeWithToggle",LoadDaysExperience:"LoadDaysExperience",FRECloseButtonClick:"FRECloseButtonClick",FRETryNowButtonClick:"FRETryNowButtonClick",AlertClick:"AlertClick",CreateAlertRulesClick:"CreateAlertRulesClick",ServiceHealthClick:"ServiceHealthClick",ViewAllAlertsClick:"ViewAllAlertsClick",ViewServiceHealthClick:"ViewServiceHealthClick",MonitorResourceCardLoadSuccessful:"MonitorResourceCardLoadSuccessful",MonitorResourceCardLoadFailed:"MonitorResourceCardLoadFailed",MonitorServiceHealthCardLoadSuccessful:"MonitorServiceHealthCardLoadSuccessful",MonitorServiceHealthCardLoadFailed:"MonitorServiceHealthCardLoadFailed",FailedResourceAlertCardReloadClick:"FailedResourceAlertCardReloadClick",FailedServiceHealthReloadClick:"FailedServiceHealthReloadClick",CreateResourceClick:"CreateResourceClick",StartProjectClick:"StartProjectClick",ConnectWorkloadsClick:"ConnectWorkloadsClick",MigrateInfrastructureClick:"MigrateInfrastructureClick",RecentlyUsedTabClick:"RecentlyUsedTabClick",FavoritesTabClick:"FavoritesTabClick",ViewAllResourceClick:"ViewAllResourceClick",ViewAllRecentResourceClick:"ViewAllRecentResourceClick",ViewAllFavoritesClick:"ViewAllFavoritesClick",ResourceNameClick:"ResourceNameClick",ResourcesTableAlertsLoadFailed:"ResourceTableAlertsLoadFailed",FailedResourcesTableAlertsRefreshClick:"FailedResourcesTableAlertsRefreshClick",NewSideBarItemClicked:"NewSideBarItemClicked",NewSideBarExpandIconClick:"NewSideBarExpandIconClick",NewSideBarOverflowIconClick:"NewSideBarOverflowIconClick",HamburgerIconClick:"HamburgerIconClick",NewSideBarFavoriteMoved:"NewSideBarFavoriteMoved"},r.AzHomeConstants={azHomeBackgroundClass:"fxs-azhome-background"}})),
define("_generated/MsPortalImpl/Svg/Library/Polychromatic/CloudShell.svg",["require","exports"],(function(e,r){"use strict";r.type=r.data=void 0;r.type=1,r.data="<svg viewBox='0 0 113.4 113.4' class='msportalfx-svg-placeholder' role='presentation' focusable='false' xmlns:svg='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'><g><title></title><path d='M0 82.6c0 1.6 1.2 3.1 3.1 3.1h76c1.6 0 3.1-1.1 3.1-3.1V28.5H0v54.1z' class='msportalfx-svg-c03'/><path d='M79.2 16.4h-76c-2 0-3.1 1.4-3.1 3v9h82.3v-9c-.1-1.6-1.3-3-3.2-3' class='msportalfx-svg-c04'/><path d='M5 33.5h72.2v47.2H5z' class='msportalfx-svg-c19'/><path d='M3.1 16.4c-1.5 0-3.1 1.5-3.1 3.1v63.9c0 1.6 1.7 3.1 3.1 3.1h3.5l65.6-70.2H3.1z' opacity='.2' class='msportalfx-svg-c01'/><path d='M23.1 44.9 10 39.5v2.6L20.1 46 10 49.9v2.6l13.1-5.4z' class='msportalfx-svg-c01'/><path d='M102.2 74.4h-.3c0-12-9.9-21.9-21.8-21.9-11.2 0-20.4 8.6-21.8 19.5-2.7-3.8-7.1-5.8-11.9-5.8-8.5 0-15.3 6.8-15.3 15.1 0 8.6 6.8 15.4 15.3 15.4h55.8c6.1 0 11.2-4.8 11.2-11.3 0-6.2-5.1-11-11.2-11' class='msportalfx-svg-c23'/><path d='M26.1 49.5h12v2h-12z' class='msportalfx-svg-c01'/></g></svg>"})),
define("MsPortalImpl/Widgets/AzureHome/AzureHome.DataSource",["require","exports","FxHubs/RpcEndPoints","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Widgets/AzureHome/AzureHome.Store","_generated/MsPortalImpl/Svg/Library/Polychromatic/ResourceDefault.svg","MsPortalImpl/Base/Base.DeepLink","MsPortalImpl/Services/Services.AssetTypes","MsPortalImpl/UI/Hubs/UI.BrowseManager","_generated/MsPortalImpl/Svg/Library/Polychromatic/Learn.svg","MsPortalImpl/Services/Services.Recents","_generated/MsPortalImpl/Svg/Library/Polychromatic/CloudShell.svg","MsPortalImpl/UI/Hubs/UI.FavoritesManager","MsPortalImpl/Services/Services.Settings","MsPortalImpl/Widgets/AzHome/AzHomeConstants","MsPortalImpl/UI/Hubs/UI.ServiceHubs","Fx"],(function(e,r,t,s,a,o,i,n,c,l,u,d,m,v,p,g,A){"use strict";r.loadResourcesCountFromSettings=r.loadLearnAzureItems=r.loadFeaturedServices=r.loadDaysExperience=r.getFeaturedServiceItemName=r.addFeaturedServiceItemToRecents=r.Impl=void 0,r.performanceMeasure=h,r.reloadRecentsPerfMarker=r.reloadRecentsAndFavorites=r.reloadRecentUsage=r.reloadRecentServicesForLeftNav=r.reloadRecentServices=r.reloadFavoritesPerfMarker=r.reloadFavorites=void 0;var S=MsPortalFx.Base,R=S.Images,y=S.Diagnostics.Telemetry,C=y.trace;const I={Microsoft_Azure_Billing_SubscriptionDetail:"portalservice::microsoft_azure_resources::resourcemanager::microsoft_azure_resources::subscriptions",HubsExtension_ResourceGroups:A.isDevelopmentMode?"portalservice::samplesextension::resourcemanager::hubsextension::resourcegroups":"portalservice::microsoft_azure_resources::resourcemanager::hubsextension::resourcegroups",HubsExtension_BrowseAllResources:A.isDevelopmentMode?"portalservice::samplesextension::resourcemanager::hubsextension::browseallresources":"portalservice::microsoft_azure_resources::resourcemanager::hubsextension::browseallresources"},k=S.Diagnostics.createLog(e);let F,f,H;function h(e,r,t){let s=performance.measure(e,r,t);return s||(s=performance.getEntriesByName(e,"measure")[0]),s}r.reloadFavoritesPerfMarker=new Promise(((e,r)=>{H=e}));var w;!function(e){e.reloadRecentUsage=(e,r=!1)=>{a.useAzureHomeStore.setState({recentsLoading:!0,azHomeRecentsLoading:!0});const n=F=MsPortalFx.newGuid();return t.AssetTypes.getRecentResourcesEndPoint.invoke(FxImpl.Rpc.client,"HubsExtension",{limit:12}).then((t=>(C({source:"AzureHomeRecents",action:"AzureHomeRecentsLoad",data:{count:t.length,initial:r}}),t.map((r=>{const t=r.assetTypeInformation.isPreview?s.Search.previewLabelFmt.format(r.name):r.name,a=r.assetTypeInformation,n=(r.resourceKind||a.defaultKind||"").toLowerCase(),c=a.kindMap&&a.kindMap[n],l=c&&c.icon||a.icon||R.CustomImageWithOptions(o,{}),u=c&&c.singularDisplayName||a.compositeDisplayName&&a.compositeDisplayName.singular||a.resourceType,d=(0,i.getAssetDeepLink)(e,{extensionName:a.extensionName,assetType:a.assetType,assetId:r.resourceId});return{resourceId:r.resourceId,name:t,typeName:u,lastViewed:new Date(r.timeStamp).toRelativeString(),icon:l,deeplink:d,isPreview:r.assetTypeInformation?.isPreview||c?.isPreview}}))))).catch((e=>{k.error("failed to load recent usage for azure-home",null,e),a.useAzureHomeStore.setState({recentUsages:[]})})).then((e=>{n===F&&a.useAzureHomeStore.setState({recentUsages:e||[]})}))};let r=!0;const A="HomeLoadFavorites",S={start:`${A}Start`,end:`${A}End`};async function w(e,r,t){const s=e.get(n.AssetTypeService),a=e.get(c.BrowseManager),o=e.get(g.ServiceHubUIManager);await Promise.all([s.assetTypesComplete,o.initialize()]);const i=a.getFilteredAssetTypes()||[],l=o.getAllServiceHubFavoriteTypes(),u=o.getAllPortalServiceFavoriteTypes();return r.map((e=>{try{return t(e,i,l,u)}catch(e){return k.error(`Failed to get tile item. Error: ${JSON.stringify(e)}`),null}})).filter(MsPortalFx.identity)}e.reloadFavorites=e=>{r&&performance.mark(S.start),a.useAzureHomeStore.setState({favoriteResourcesLoading:!0,azHomeFavoriteResourcesLoading:!0});const n=f=MsPortalFx.newGuid();return t.AssetTypes.getFavoriteResourcesEndPoint.invoke(FxImpl.Rpc.client,"HubsExtension",{limit:12}).then((t=>{if(C({source:"AzureHomeFavorites",action:"AzureHomeFavoritesLoad",data:{count:t.length,initial:r}}),r){r=!1,performance.mark(S.end);const e=h(A,S.start,S.end);H(e.duration)}return t.map((r=>{const t=r.assetTypeInformation?.isPreview?s.Search.previewLabelFmt.format(r.name):r.name,a=r.assetTypeInformation,n=(r.resourceKind||a?.defaultKind||"").toLowerCase(),c=a?.kindMap&&a.kindMap[n],l=c&&c.icon||a?.icon||R.CustomImageWithOptions(o,{}),u=c&&c.singularDisplayName||a?.compositeDisplayName&&a.compositeDisplayName.singular||a?.resourceType,d=a?(0,i.getAssetDeepLink)(e,{extensionName:a.extensionName,assetType:a.assetType,assetId:r.resourceId}):(0,i.prependTenantToResourceDeepLink)(e,`#resource${r.resourceId}`);return{resourceId:r.resourceId,name:t,typeName:u,icon:l,deeplink:d,isPreview:r.assetTypeInformation?.isPreview||c?.isPreview}}))})).catch((e=>{k.error("failed to load favorite resources for azure-home",null,e),a.useAzureHomeStore.setState({favoriteResources:[]})})).then((e=>{n===f&&a.useAzureHomeStore.setState({favoriteResources:e||[]})}))},e.loadLearnAzureItems=(e,r)=>{const t=e.get(n.AssetTypeService),a=s.AzureHome.LearnMoreAssets;return w(e,r,((r,s)=>{if("cloudShell"===r)return{icon:R.CustomImageWithOptions(d,{}),deeplink:"#home",descHTML:a.DescHTML.cloudShell,linkText:a.LinkText.cloudShell,classes:"fxs-home-cloudshell-tile",hrefTarget:null,telemetryName:"cloudshell",additionalOnClickAction:(e,r)=>{$(e.currentTarget).trigger("fxtoggleconsole"),e.preventDefault()},hasFavoriteItem:!1};if(r.externalLink)return{icon:R.CustomImageWithOptions(l,{}),deeplink:r.externalLink,descHTML:a.DescHTML.learn,linkText:a.LinkText.learn,classes:"fxs-home-learn-tile",external:!0,hrefTarget:"_blank",telemetryName:"learnazuretile",hasFavoriteItem:!1};{const o=r.privateAsset?t.assetTypes.map((e=>e)):s,i=(0,m.findAssetTypeFavoriteItem)(o,r.assetId,e),n=r.resxKey;return i&&{assetId:r.assetId,icon:i.image,deeplink:i.uri,descHTML:a.DescHTML[n]||"",linkText:a.LinkText[n]||"",classes:"fxs-home-blade-tile",hrefTarget:null,telemetryName:r.assetId,additionalOnClickAction:(r,t)=>{e.get(u.RecentServicesManager).addService({type:"assetType",assetId:t.assetId})},hasFavoriteItem:!r.privateAsset}}}))},e.loadFeaturedServices=(e,r)=>w(e,r,((r,t,a,o)=>{if("Dashboard"===r.assetId)return{assetId:"Dashboard",icon:R.Polychromatic.Dashboard(),name:s.NavBar.home,deeplink:(0,i.getDefaultDashboardDeeplink)(),hasFavoriteItem:!1};if(r.assetId){const s=r.assetId,a=o[I[s]];if(a?.portalService?.isEnabled)return{portalServiceFavoriteId:a.id,icon:a.image,name:a.label,deeplink:a.uri,hasFavoriteItem:!0};const i=(0,m.findAssetTypeFavoriteItem)(t,s,e);return i&&{assetId:s,icon:i.image,name:i.label,deeplink:(s.toLowerCase()===n.lowerCaseAllResourcesId?n.getBrowseAllDeeplink():i.uri)||null,hasFavoriteItem:!0}}if(r.serviceHubFavoriteTypeId){const e=a[r.serviceHubFavoriteTypeId];return e&&{serviceHubFavoriteTypeId:e.id,icon:e.image,name:e.label,deeplink:e.uri,hasFavoriteItem:!0}}if(r.portalServiceFavoriteId){const e=o[r.portalServiceFavoriteId];return e&&{portalServiceFavoriteId:e.id,icon:e.image,name:e.label,deeplink:e.uri,hasFavoriteItem:!0}}})),e.getFeaturedServiceItemName=e=>"assetId"in e?e.assetId:"serviceHubFavoriteTypeId"in e?e.serviceHubFavoriteTypeId:"portalServiceFavoriteId"in e?e.portalServiceFavoriteId:"",e.addFeaturedServiceItemToRecents=async(e,r)=>{"assetId"in e?await r.addService({type:"assetType",assetId:e.assetId}):"serviceHubFavoriteTypeId"in e?await r.addService({type:"serviceHub",serviceHubFavoriteTypeId:e.serviceHubFavoriteTypeId}):"portalServiceFavoriteId"in e&&await r.addService({type:"portalService",portalServiceFavoriteId:e.portalServiceFavoriteId})},e.reloadRecentServices=r=>{const t=r.get(u.RecentServicesManager),{featuredServicesIdFromConfig:s}=a.useAzureHomeStore.getState();return FxImpl.tryImmediateResolve(t.getServices(),(async t=>{const o=r.get(c.BrowseManager).getFilteredAssetTypes()||[];a.useAzureHomeStore.setState({filteredAssetTypes:o});const i=s.length,n=t.filter((e=>e.assetId?!!MsPortalFx.find(o,(r=>r.id.toLowerCase()===e.assetId.split(".")[0])):!(!e.serviceHubFavoriteTypeId&&!e.portalServiceFavoriteId))).slice(0,i);let l=0;const u=new Set(n.filter((e=>e.assetId)).map((e=>e.assetId.toLowerCase())));for(;n.length<i&&l<i;)for(;l<i;){const e=s[l++];if(!u.has(e)){u.add(e),n.push({assetId:e});break}}return await e.loadFeaturedServices(r,n)}))},e.reloadRecentServicesForLeftNav=r=>{const t=r.get(u.RecentServicesManager);return FxImpl.tryImmediateResolve(t.getServices(),(async t=>await e.loadFeaturedServices(r,t)))};let z=!0;const M="HomeLoadRecents",T={start:`${M}Start`,end:`${M}End`};let b;async function L(e){const r=await e.querySettings({store:6,keys:["browse_recentResources","browse_favoriteResources"]}),t=r.browse_recentResources||{},s=r.browse_favoriteResources||{};return{recentResourcesCount:t.version>=1&&t.data?.length||0,favoriteResourcesCount:s.data?.length||0}}async function x(e){const r=await e.querySetting(12,"FirstVisitedTimestamp");return Math.floor((Date.now()-(r||Date.now()))/864e5)}e.reloadRecentsPerfMarker=new Promise(((e,r)=>{b=e})),e.reloadRecents=r=>(z&&performance.mark(T.start),Promise.all([e.reloadRecentServices(r),e.reloadRecentUsage(r,z)]).then((()=>{if(z){z=!1,performance.mark(T.end);const e=h(M,T.start,T.end);b(e.duration)}}))),e.reloadRecentsAndFavorites=function(r){a.useAzureHomeStore.setState({recentsLoading:!0,azHomeRecentsLoading:!0,favoriteResourcesLoading:!0,azHomeFavoriteResourcesLoading:!0,leftNavRecentServicesLoading:!0}),e.reloadRecents(r),e.reloadFavorites(r)},e.loadResourcesCountFromSettings=L,e.loadDaysExperience=async function(e){const r=y.startTrace({source:p.TelemetrySourceConstants.AzureHomeDataSource,action:p.TelemetryActionConstants.LoadDaysExperience}),s=await e.getAsync(v.SettingsManager),[{recentResourcesCount:o,favoriteResourcesCount:i},n]=await Promise.all([L(s),x(s)]);let c=0;if(MsPortalFx.isFeatureEnabled("testzerosubsexperience"))c=0;else if(o+i>0)c=100;else{const r=await t.Impl.getAllSubscriptionsCount(e.get(FxImpl.Rpc.Client));c=0===r.value&&1===r.type?0:1}a.useAzureHomeStore.setState({daysFromFirstVisit:n,daysExperienceLoading:!1,daysExperience:c}),y.completeTrace(r,{recentResourcesCount:o,favoriteResourcesCount:i,daysFromFirstVisit:n,daysExperience:c})}}(w||(r.Impl=w={}));r.loadFeaturedServices=w.loadFeaturedServices,r.loadLearnAzureItems=w.loadLearnAzureItems,r.reloadFavorites=w.reloadFavorites,r.reloadRecentUsage=w.reloadRecentUsage,r.reloadRecentsPerfMarker=w.reloadRecentsPerfMarker,r.reloadRecentServices=w.reloadRecentServices,r.reloadRecentServicesForLeftNav=w.reloadRecentServicesForLeftNav,r.reloadRecentsAndFavorites=w.reloadRecentsAndFavorites,r.loadResourcesCountFromSettings=w.loadResourcesCountFromSettings,r.loadDaysExperience=w.loadDaysExperience,r.getFeaturedServiceItemName=w.getFeaturedServiceItemName,r.addFeaturedServiceItemToRecents=w.addFeaturedServiceItemToRecents}));